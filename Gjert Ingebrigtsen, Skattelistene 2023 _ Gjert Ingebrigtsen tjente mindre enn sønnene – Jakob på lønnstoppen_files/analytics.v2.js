/** medietall.no - 607d77e46bf6b242026472c2_generation2_20231204T2059 - Kilkaya AS - Copyright 2023 - Config:medietallno */
(()=>{"use strict";function e(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var t=0;function i(e){return"__private_"+t+++"_"+e}var s=i("k5a"),a=i("hookAbleEvents"),r=i("delayEventCnt"),o=i("currHref"),n=i("prevHref"),l=i("hookMap"),h=i("callBacks"),d=i("lastClickTime"),c=i("clickTTL"),u=i("exitType"),w=i("forceDOMContentLoaded"),p=i("initUrls"),f=i("getLocationHref"),g=i("isNewUrl"),v=i("addSPASupport"),b=i("handleSPATransition"),y=i("calcExitType"),m=i("handleEvent"),k=i("execDelayHook"),O=i("execHook"),P=i("execute"),j=i("runDebug"),S=i("eventDebug");class D{constructor(t){Object.defineProperty(this,S,{value:N}),Object.defineProperty(this,j,{value:U}),Object.defineProperty(this,P,{value:R}),Object.defineProperty(this,O,{value:F}),Object.defineProperty(this,k,{value:I}),Object.defineProperty(this,m,{value:x}),Object.defineProperty(this,y,{value:T}),Object.defineProperty(this,b,{value:E}),Object.defineProperty(this,v,{value:L}),Object.defineProperty(this,g,{value:M}),Object.defineProperty(this,f,{value:A}),Object.defineProperty(this,p,{value:C}),Object.defineProperty(this,w,{value:_}),Object.defineProperty(this,s,{writable:!0,value:null}),Object.defineProperty(this,a,{writable:!0,value:{ready:[],active:[],hidden:[],pageView:[],click:[],exit:[],scroll:[],activity:[],spa:[]}}),Object.defineProperty(this,r,{writable:!0,value:0}),Object.defineProperty(this,o,{writable:!0,value:location.href}),Object.defineProperty(this,n,{writable:!0,value:null}),Object.defineProperty(this,l,{writable:!0,value:{blur:{hooks:["hidden"]},hidden:{hooks:["hidden"]},active:{hooks:["active"]},focus:{hooks:["active"]},loading:{hooks:["pageView"]},interactive:{hooks:["pageView","ready"]},complete:{hooks:["pageView","ready"]},DOMContentLoaded:{hooks:["pageView","ready"]},pageshow:{hooks:["pageView","ready"]},click:{hooks:["click"]},pagehide:{hooks:["exit"]},scroll:{hooks:["scroll","activity"],delay:!0},mousemove:{hooks:["activity"],delay:!0},mousedown:{hooks:["click"],delay:!1},mouseup:{hooks:["activity"],delay:!0},touchstart:{hooks:["activity"],delay:!0},touchend:{hooks:["activity"],delay:!0},keyup:{hooks:["activity"],delay:!0},keydown:{hooks:["activity"],delay:!0},spa:{hooks:["spa"]}}}),Object.defineProperty(this,h,{writable:!0,value:{interactive:[],load:[],loaded:[],click:[]}}),Object.defineProperty(this,d,{writable:!0,value:0}),Object.defineProperty(this,c,{writable:!0,value:301}),Object.defineProperty(this,u,{writable:!0,value:"exit"}),e(this,s)[s]=t,e(this,p)[p](),t.cfg&&t.cfg.clickTTL&&t.cfg.clickTTL>e(this,c)[c]&&(e(this,c)[c]=t.cfg.clickTTL,e(this,s)[s].speaker.say("Click TTL: "+e(this,c)[c],"listener")),window.addEventListener("DOMContentLoaded",e(this,m)[m].bind(this),!0),e(this,s)[s].element.addEventListener("readystatechange",e(this,m)[m].bind(this),!0),e(this,s)[s].element.addEventListener("visibilitychange",e(this,m)[m].bind(this),!0),e(this,s)[s].element.addEventListener("click",e(this,m)[m].bind(this),!1),e(this,s)[s].element.addEventListener("scroll",e(this,m)[m].bind(this),!1),e(this,s)[s].element.addEventListener("mousemove",e(this,m)[m].bind(this),!0),e(this,s)[s].element.addEventListener("mousedown",e(this,m)[m].bind(this),!0),window.addEventListener("pageshow",e(this,m)[m].bind(this),!0),window.addEventListener("pagehide",e(this,m)[m].bind(this),{capture:!0}),window.addEventListener("blur",e(this,m)[m].bind(this),!0),window.addEventListener("focus",e(this,m)[m].bind(this),!0),e(this,v)[v]()}postInitialize(){if(!document.readyState||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)setTimeout(function(){e(this,w)[w]()}.bind(this),500);else{e(this,s)[s].speaker.say("postInitialize firing DOMContentLoaded:"+document.readyState);try{e(this,w)[w]()}catch(t){console.log("Error creating event[1]: "+t.toString()),setTimeout(function(){e(this,w)[w]()}.bind(this),500)}}}getCurrentUrl(){return e(this,o)[o]}getPrevUrl(){return e(this,n)[n]}fireHook(t){if(e(this,l)[l][t])try{var i=document.createEvent("Event");i.initEvent(t,!0,!0),e(this,O)[O](t,i)}catch(e){console.log("Could not run fireHook on '"+t+"': "+e.toString())}}addHook(t,i,s=!1){"activity"!=t&&"spa"!=t||(s=!0),e(this,a)[a][t].push({callBack:i,done:!1,reuse:s})}getExitType(){return e(this,u)[u]}}function _(){try{var t=document.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),e(this,O)[O]("DOMContentLoaded",t)}catch(e){console.log("Could not run forced event: "+e.toString())}}function C(){e(this,o)[o]=e(this,f)[f](),e(this,n)[n]=null}function A(){let t=location.href.replace(/\/$/,"");return e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&(t=t.replace(/\#[^&]+/,"")),e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&(t=t.replace(/[\#\?\&].+/,""))),t}function M(){var t=e(this,f)[f]();return e(this,o)[o]!==t&&(e(this,n)[n]=e(this,o)[o],e(this,o)[o]=t,!0)}function L(){e(this,s)[s].cfg.pageData&&e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.customEvent&&""!==e(this,s)[s].cfg.pageData.SPA.customEvent?(e(this,s)[s].speaker.say("Setting up SPA with customEvent: "+e(this,s)[s].cfg.pageData.SPA.customEvent,"listener"),e(this,s)[s].element.addEventListener(e(this,s)[s].cfg.pageData.SPA.customEvent,(t=>{e(this,s)[s].speaker.say("GOT SPA Event: "+e(this,o)[o]+" vs "+location.href+" "+e(this,d)[d]+" "+t.timeStamp),(e(this,g)[g]()||e(this,s)[s].cfg.pageData.SPA.forcedSPA)&&(e(this,y)[y](t.timeStamp),e(this,b)[b](!0))}),!0)):"MutationObserver"in window?new MutationObserver(function(t){if(e(this,s)[s].cfg.pageData.SPA.triggers&&""!=e(this,s)[s].cfg.pageData.SPA.triggers){for(var i=0;i<t.length;i++)if(t[i].target&&t[i].target.tagName){let r=[];if("head"==t[i].target.tagName.toLowerCase()&&t[i].addedNodes.length>0)for(let e=0;e<t[i].addedNodes.length;e++)"meta"==t[i].addedNodes[e].tagName.toLowerCase()&&r.push(t[i].addedNodes[e]);else"meta"==t[i].target.tagName.toLowerCase()&&r.push(t[i].target);for(let t=0;t<r.length;t++){var a=r[t].getAttribute("property");null==a&&(a=r[t].getAttribute("name")),a&&""!=a&&null!==a.match(new RegExp(e(this,s)[s].cfg.pageData.SPA.triggers))&&(e(this,s)[s].speaker.say('SPA mutation: got a match: "'+a+'" matched with: "'+e(this,s)[s].cfg.pageData.SPA.triggers+'"'),e(this,b)[b]())}}}else e(this,b)[b]()}.bind(this)).observe(document.documentElement||document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0}):this.addHook("activity",function(t){window.requestIdleCallback((()=>{e(this,b)[b]()}))}.bind(this),!0))}function E(t=!1){(e(this,g)[g]()||t)&&setTimeout(function(){e(this,s)[s].cfg.pageData.SPA&&!1!==e(this,s)[s].cfg.pageData.SPA.metaData?e(this,s)[s].pageData.reRead():e(this,s)[s].pageData.setField("url",e(this,o)[o]),e(this,s)[s].resetRequestId(),e(this,O)[O]("spa",new CustomEvent("spa",{detail:{sourceUrl:e(this,n)[n],targetUrl:e(this,o)[o]}}),!0)}.bind(this),e(this,s)[s].cfg.pageData.SPA&&e(this,s)[s].cfg.pageData.SPA.delayEvent&&e(this,s)[s].cfg.pageData.SPA.delayEvent>0?1e3*e(this,s)[s].cfg.pageData.SPA.delayEvent:1)}function T(t){e(this,d)[d]>0&&t>0&&t>=e(this,d)[d]&&t-e(this,d)[d]<=e(this,c)[c]?e(this,u)[u]="click":e(this,u)[u]="exit"}function x(t){switch(t.type){case"pagehide":e(this,y)[y](t.timeStamp),e(this,O)[O](t.type,t);break;case"readystatechange":let i=t.target.readyState;void 0!==e(this,l)[l][i]&&e(this,O)[O](i,t),"complete"==t.target.readyState&&(e(this,P)[P]("interactive",t),e(this,P)[P]("loaded",t));break;case"pageshow":e(this,O)[O](t.type,t,t.persisted);break;case"visibilitychange":e(this,S)[S]("visibility: "+document.visibilityState),e(this,O)[O]("visible"===document.visibilityState?"active":"hidden",t,!0);break;case"click":case"mousedown":if("click"==t.type&&e(this,d)[d]>0&&e(this,d)[d]>=t.timeStamp-e(this,c)[c])return void e(this,s)[s].speaker.say("event is click and we just did a mousedown event on this click","listener");e(this,d)[d]=t.timeStamp,e(this,y)[y](t.timeStamp),e(this,O)[O](t.type,t);break;case"DOMContentLoaded":case"mousemove":case"mouseup":case"scroll":case"beforeunload":case"blur":case"focus":e(this,l)[l][t.type].delay?(e(this,r)[r]++,setTimeout(e(this,k)[k].bind(this,t.type,t,e(this,r)[r]),100)):e(this,O)[O](t.type,t);break;default:e(this,s)[s].speaker.say("Don't know how to handle this event: "+t.type)}}function I(t,i,s){s===e(this,r)[r]&&e(this,O)[O](i.type,i)}function F(t,i,r=!1){if(e(this,s)[s].speaker.say("Got hook: "+t,"listener"),void 0!==e(this,l)[l][t]){"pageView"!==e(this,l)[l][t]&&"spa"!==e(this,l)[l][t]||this.k5a.resetRequestId();for(var o=0;o<e(this,l)[l][t].hooks.length;o++){let h=e(this,l)[l][t].hooks[o];for(var n=0;n<e(this,a)[a][h].length;n++)if(0==e(this,a)[a][h][n].done||1==r)try{e(this,a)[a][h][n].callBack(i),e(this,a)[a][h][n].reuse||(e(this,a)[a][h][n].done=!0)}catch(t){e(this,s)[s].speaker.say("Could not execute callback....."+t.toString(),"listener")}else e(this,s)[s].speaker.say("["+i.type+"]Hook already done: "+h,"listener");e(this,s)[s].logger.fire(h,i.source||"js",i.type)}}else e(this,s)[s].speaker.say("undefined hook: "+t,"listener")}function R(t,i){for(var s=0;s<e(this,h)[h][t].length;s++)0==e(this,h)[h][t][s].done&&(e(this,h)[h][t][s].callback(i),e(this,h)[h][t][s].done=!0)}function U(e){var t=document.getElementById("evtDebug");null===t&&((t=document.createElement("DIV")).id="evtDebug",t.style="background:grey;color:white;padding:5px;position:fixed;bottom:10px;right:10px;width:250px;min-height:30px;font-size:12px;opacity:0.85;",document.body.appendChild(t)),t.innerHTML+="<li>"+e.type+" "+document.visibilityState}function N(e){}function q(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var B=0;function H(e){return"__private_"+B+++"_"+e}var K=H("debugMode"),V=H("devMode"),z=H("debugUrl"),J=H("prefix"),Y=H("k5a"),G=H("debugModules"),W=H("getCaller"),Q=H("canDebug"),Z=H("logold"),$=H("log");class X{constructor(e=null,t=!1,i=!1){Object.defineProperty(this,$,{value:se}),Object.defineProperty(this,Z,{value:ie}),Object.defineProperty(this,Q,{value:te}),Object.defineProperty(this,W,{value:ee}),Object.defineProperty(this,K,{writable:!0,value:!0}),Object.defineProperty(this,V,{writable:!0,value:!1}),Object.defineProperty(this,z,{writable:!0,value:!1}),Object.defineProperty(this,J,{writable:!0,value:"K5A"}),Object.defineProperty(this,Y,{writable:!0,value:null}),Object.defineProperty(this,G,{writable:!0,value:{}}),q(this,Y)[Y]=e,q(this,V)[V]=i,this.debugMode=t,this.initModes()}set debugUrl(e=!1){q(this,z)[z]=e}set debugMode(e=!1){q(this,K)[K]=e,e&&this.say("Debug mode is on!")}set devMode(e=!1){e&&(this.say("Dev mode is on!"),q(this,V)[V]=e)}get debugMode(){return q(this,K)[K]}getDebugModeModule(e){return q(this,Q)[Q](e)}setDebugModeModule(e,t=!0){""!==e&&e.length>3&&(q(this,G)[G][e]=t,q(this,K)[K]=!0)}initModes(){if(location.href.indexOf("k5aDebug")>-1){let t=new URL(location.href),i=t.searchParams.get("k5aDebug");if(i.indexOf("|")>-1||i.length>3){let t=i.split("|");for(var e=0;e<t.length;e++)q(this,G)[G][t[e].trim()]=!0,q(this,K)[K]=!0;this.say("Debugmode ON for: ["+t.join(" ")+"]","k5a")}else"1"!==i&&"true"!==i||(q(this,K)[K]=!0);let s=t.searchParams.get("k5aDebugDev");"1"!==s&&"true"!==s||(q(this,V)[V]=!0,this.say("Dev mode ON","k5a"))}}setPersistentDebugMode(e=!1,t=!1){if(e){var i=t?2:1;q(this,Y)[Y].storage.setKey("dbg",i,3600),this.debugMode=!0,this.say("Persistent debug mode initialized","k5a")}else q(this,Y)[Y].storage.delKey("dbg")}checkPersistentDebugMode(){if(q(this,Y)[Y].storage&&q(this,Y)[Y].storage.canStore()){var e=q(this,Y)[Y].storage.getKey("dbg");e&&(e>1?(this.debugMode=!0,this.devMode=!0):1===e&&(this.devMode=!1,this.debugMode=!0))}}say(e,t="k5a"){q(this,K)[K]&&q(this,$)[$](e,"info",t)}info(e,t="k5a"){q(this,$)[$](e,"info",t)}error(e,t="k5a"){q(this,$)[$](e,"error",t)}warn(e,t="k5a"){q(this,$)[$](e,"warn",t)}table(e,t="k5a"){q(this,Q)[Q](t)&&(console.table?console.table(e):console.debug(JSON.stringify(e)))}dump(e){q(this,K)[K]&&(q(this,V)[V]?console.trace(q(this,J)[J],e):console.debug(q(this,J)[J],e))}}function ee(){let e=((new Error).stack||"").split("\n");for(var t=1;t<e.length;t++)if(-1===e[t].indexOf("speaker2.js")||t+1==e.length)return e[t].trim();return""}function te(e){return!(!q(this,K)[K]||Object.keys(q(this,G)[G]).length>0&&(void 0===q(this,G)[G][e]||!1===q(this,G)[G][e]))}function ie(e){q(this,V)[V]?console.trace(q(this,J)[J],e):console.log(q(this,J)[J],e),!1!==q(this,z)[z]&&((new Image).src=q(this,z)[z]+"?"+e)}function se(e,t="info",i=null){let s="";if("object"==typeof e&&(void 0!==e.prefix&&(s=e.prefix),t=e.type,i=e.module,e=e.message),q(this,Q)[Q](i)||"error"==t){let a="font-weight:bold;color:#284352;",r={info:"blue",error:"red",warn:"orange"},o=q(this,J)[J]+(null!==i?"["+i+"]":"")+s;if("error"===t?console.error("%c"+o+": %c"+e,a,"color:"+r[t]):console.log("%c"+o+": %c"+e,a,"color:"+r[t]),q(this,V)[V]){let e=q(this,W)[W]();console.log("%c"+o+": %c \\-> "+e,a,"color:"+r[t])}}}function ae(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var re=0;function oe(e){return"__private_"+re+++"_"+e}var ne=oe("k5a"),le=oe("data"),he=oe("hookMap"),de=oe("loggerEnabled"),ce=oe("useRateLimiter"),ue=oe("reqCnt"),we=oe("reqLastCheckTime"),pe=oe("reqFastReqCnt"),fe=oe("totalMaxRequest"),ge=oe("timeMaxRequest"),ve=oe("timeRequestsCnt"),be=oe("compileLogdata"),ye=oe("checkRateLimits");class me{constructor(e){Object.defineProperty(this,ye,{value:Oe}),Object.defineProperty(this,be,{value:ke}),Object.defineProperty(this,ne,{writable:!0,value:null}),Object.defineProperty(this,le,{writable:!0,value:{}}),Object.defineProperty(this,he,{writable:!0,value:{pageView:"p",click:"c",exit:"e",activity:"a",video:"v",nisa:"n"}}),Object.defineProperty(this,de,{writable:!0,value:!0}),Object.defineProperty(this,ce,{writable:!0,value:!1}),Object.defineProperty(this,ue,{writable:!0,value:0}),Object.defineProperty(this,we,{writable:!0,value:null}),Object.defineProperty(this,pe,{writable:!0,value:0}),Object.defineProperty(this,fe,{writable:!0,value:1e3}),Object.defineProperty(this,ge,{writable:!0,value:10}),Object.defineProperty(this,ve,{writable:!0,value:10}),ae(this,ne)[ne]=e,void 0!==ae(this,ne)[ne].cfg.rateLimiter&&(ae(this,ce)[ce]=!!ae(this,ne)[ne].cfg.rateLimiter.enabled,ae(this,ce)[ce]&&ae(this,ne)[ne].speaker.say("Using ratelimiter with these settings: "+JSON.stringify(ae(this,ne)[ne].cfg.rateLimiter),"logger"),void 0!==ae(this,ne)[ne].cfg.rateLimiter.maxRequests&&(ae(this,fe)[fe]=ae(this,ne)[ne].cfg.rateLimiter.maxRequests),void 0!==ae(this,ne)[ne].cfg.rateLimiter.throttlingTime&&(ae(this,ge)[ge]=ae(this,ne)[ne].cfg.rateLimiter.throttlingTime),void 0!==ae(this,ne)[ne].cfg.rateLimiter.throttlingCount&&(ae(this,ve)[ve]=ae(this,ne)[ne].cfg.rateLimiter.throttlingCount))}disable(){ae(this,de)[de]=!1}enable(){ae(this,de)[de]=!0}fireNow(e,t,i,s="c"){this.addData(e,t),this.fire(e,i,s)}addData(e,t){ae(this,ne)[ne].speaker.say("adding data for: "+e,"logger"),ae(this,ne)[ne].speaker.table(t,"logger"),void 0===ae(this,le)[le][e]?ae(this,le)[le][e]=t:ae(this,le)[le][e]={...ae(this,le)[le][e],...t}}fire(e,t="",i=""){if(void 0!==ae(this,le)[le][e]){var s=ae(this,le)[le][e];delete ae(this,le)[le][e],void 0!==ae(this,he)[he][e]&&(s.l=ae(this,he)[he][e]),void 0!==s._h&&""!==s._h||(s._h=e),void 0!==s._s&&""!==s._s||(s._s=t),void 0!==s._l&&""!==s._l||(s._l=i),ae(this,ue)[ue]++,s._c=ae(this,ue)[ue],ae(this,ye)[ye](),this.doLog(s)}}doLog(e){if(0==ae(this,de)[de])return;let t=ae(this,be)[be](e);ae(this,ne)[ne].speaker.say("full send: "+t);try{if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(t+"&_m=b",{});var i=(new Date).getTime();return(new Image).src=t+"&_m=i&_r="+i,!0}catch(e){console.error(e.toString())}}doPostLog(e){if(ae(this,ye)[ye](),0!=ae(this,de)[de])try{if(navigator&&navigator.sendBeacon){ae(this,ue)[ue]++;var t=[];if(void 0===e.l)return console.error("Missing logType!"),!1;t.push("l="+e.l),["_h","_s","_l"].forEach((function(i,s){void 0===e[i]&&(e[i]=""),t.push(i+"="+e[i])})),t.push("_m=b"),t.push("_c="+ae(this,ue)[ue]),e.i=ae(this,ne)[ne].cfg.installationId,navigator.sendBeacon(ae(this,ne)[ne].k5aServer+"p?i="+ae(this,ne)[ne].cfg.installationId+"&"+t.join("&"),JSON.stringify(e))}}catch(e){console.error(e.toString())}}}function ke(e){for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join("|"));var i="";void 0!==e.l&&(i="&l="+e.l,delete e.l);var s=Object.keys(e).map((t=>t+"="+encodeURIComponent(e[t]))).join("&");return ae(this,ne)[ne].k5aServer+"?i="+ae(this,ne)[ne].cfg.installationId+i+"&"+s}function Oe(){if(ae(this,ce)[ce]){if(null===ae(this,we)[we])return void(ae(this,we)[we]=parseInt((new Date).getTime()/1e3));let e=parseInt((new Date).getTime()/1e3);e-ae(this,we)[we]<=ae(this,ge)[ge]?(ae(this,pe)[pe]++,ae(this,pe)[pe]>=ae(this,ve)[ve]&&(ae(this,de)[de]?(ae(this,ne)[ne].speaker.say("Throttling log requests, execeed limits with "+ae(this,pe)[pe]+" of "+ae(this,ve)[ve]+" the last "+ae(this,ge)[ge]+" seconds","logger"),this.disable()):ae(this,ne)[ne].speaker.say("Log requests is throttled, execeed limits with "+ae(this,pe)[pe]+" of "+ae(this,ve)[ve]+" the last "+ae(this,ge)[ge]+" seconds","logger"))):(ae(this,pe)[pe]=0,!1===ae(this,de)[de]&&ae(this,ue)[ue]<ae(this,fe)[fe]&&(ae(this,ne)[ne].speaker.say("Reenabling logging again","logger"),this.enable())),ae(this,we)[we]=e,ae(this,ue)[ue]>ae(this,fe)[fe]&&ae(this,ne)[ne].speaker.warn("This client execeded max total log requests - "+ae(this,ue)[ue]+" of max "+ae(this,fe)[fe],"logger")}}function Pe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var je=0;function Se(e){return"__private_"+je+++"_"+e}var De=Se("url");class _e{constructor(e=null){Object.defineProperty(this,De,{writable:!0,value:""}),null!==e&&null!==e.match(/^\/\//i)&&(e=location.protocol+"//"+e);try{var t;Pe(this,De)[De]=new URL(null!=(t=e)?t:location.href)}catch(t){var i;console.error("Invalid url given '"+(null!=(i=e)?i:location.href)+"' "+t.toString())}}get isLink(){return 0==Pe(this,De)[De].href.toLowerCase().indexOf("http",0)}get domain(){return Pe(this,De)[De].hostname.split(".").slice(-2).join(".")}get hash(){return Pe(this,De)[De].hash}get host(){return Pe(this,De)[De].host}get hostname(){return Pe(this,De)[De].hostname}get href(){return Pe(this,De)[De].href}get origin(){return Pe(this,De)[De].origin}get password(){return Pe(this,De)[De].password}get pathname(){return Pe(this,De)[De].pathname}get port(){return Pe(this,De)[De].port}get protocol(){return Pe(this,De)[De].port}get search(){return Pe(this,De)[De].search}get searchParams(){return Pe(this,De)[De].searchParams}get clean(){return Pe(this,De)[De].href.split(/[?#]/)[0]}}function Ce(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ae=0;function Me(e){return"__private_"+Ae+++"_"+e}var Le=Me("f"),Ee=Me("keyStrBase64"),Te=Me("keyStrUriSafe"),xe=Me("baseReverseDic");class Ie{constructor(){Object.defineProperty(this,Le,{writable:!0,value:String.fromCharCode}),Object.defineProperty(this,Ee,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}),Object.defineProperty(this,Te,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}),Object.defineProperty(this,xe,{writable:!0,value:{}})}getBaseValue(e,t){if(!Ce(this,xe)[xe][e]){Ce(this,xe)[xe][e]={};for(var i=0;i<e.length;i++)Ce(this,xe)[xe][e][e.charAt(i)]=i}return Ce(this,xe)[xe][e][t]}compressToBase64(e){if(null==e)return"";var t=this._compress(e,6,function(e){return Ce(this,Ee)[Ee].charAt(e)}.bind(this));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}}decompressFromBase64(e){return null==e?"":""==e?null:this._decompress(e.length,32,function(t){return getBaseValue(Ce(this,Ee)[Ee],e.charAt(t))}.bind(this))}compressToUTF16(e){return null==e?"":this._compress(e,15,function(e){return Ce(this,Le)[Le](e+32)}.bind(this))+" "}decompressFromUTF16(e){return null==e?"":""==e?null:this._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32}.bind(e))}compressToUint8Array(e){for(var t=this.compress(e),i=new Uint8Array(2*t.length),s=0,a=t.length;s<a;s++){var r=t.charCodeAt(s);i[2*s]=r>>>8,i[2*s+1]=r%256}return i}decompressFromUint8Array(e){if(null==e)return this.decompress(e);for(var t=new Array(e.length/2),i=0,s=t.length;i<s;i++)t[i]=256*e[2*i]+e[2*i+1];var a=[];return t.forEach(function(e){a.push(Ce(this,Le)[Le](e))}.bind(this)),this.decompress(a.join(""))}compressToEncodedURIComponent(e){return null==e?"":this._compress(e,6,function(e){return Ce(this,Te)[Te].charAt(e)}.bind(this))}decompressFromEncodedURIComponent(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),this._decompress(e.length,32,function(t){return getBaseValue(Ce(this,Te)[Te],e.charAt(t))}.bind(this)))}compress(e){return this._compress(e,16,function(e){return Ce(this,Le)[Le](e)}.bind(this))}_compress(e,t,i){if(null==e)return"";var s,a,r,o={},n={},l="",h="",d="",c=2,u=3,w=2,p=[],f=0,g=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=u++,n[l]=!0),h=d+l,Object.prototype.hasOwnProperty.call(o,h))d=h;else{if(Object.prototype.hasOwnProperty.call(n,d)){if(d.charCodeAt(0)<256){for(s=0;s<w;s++)f<<=1,g==t-1?(g=0,p.push(i(f)),f=0):g++;for(a=d.charCodeAt(0),s=0;s<8;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1}else{for(a=1,s=0;s<w;s++)f=f<<1|a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a=0;for(a=d.charCodeAt(0),s=0;s<16;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1}0==--c&&(c=Math.pow(2,w),w++),delete n[d]}else for(a=o[d],s=0;s<w;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1;0==--c&&(c=Math.pow(2,w),w++),o[h]=u++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(n,d)){if(d.charCodeAt(0)<256){for(s=0;s<w;s++)f<<=1,g==t-1?(g=0,p.push(i(f)),f=0):g++;for(a=d.charCodeAt(0),s=0;s<8;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1}else{for(a=1,s=0;s<w;s++)f=f<<1|a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a=0;for(a=d.charCodeAt(0),s=0;s<16;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1}0==--c&&(c=Math.pow(2,w),w++),delete n[d]}else for(a=o[d],s=0;s<w;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1;0==--c&&(c=Math.pow(2,w),w++)}for(a=2,s=0;s<w;s++)f=f<<1|1&a,g==t-1?(g=0,p.push(i(f)),f=0):g++,a>>=1;for(;;){if(f<<=1,g==t-1){p.push(i(f));break}g++}return p.join("")}decompress(e){return null==e?"":""==e?null:this._decompress(e.length,32768,function(t){return e.charCodeAt(t)}.bind(e))}_decompress(e,t,i){var s,a,r,o,n,l,h,d=[],c=4,u=4,w=3,p="",f=[],g={val:i(0),position:t,index:1};for(s=0;s<3;s+=1)d[s]=s;for(r=0,n=Math.pow(2,2),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;switch(r){case 0:for(r=0,n=Math.pow(2,8),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;h=Ce(this,Le)[Le](r);break;case 1:for(r=0,n=Math.pow(2,16),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;h=Ce(this,Le)[Le](r);break;case 2:return""}for(d[3]=h,a=h,f.push(h);;){if(g.index>e)return"";for(r=0,n=Math.pow(2,w),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;switch(h=r){case 0:for(r=0,n=Math.pow(2,8),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;d[u++]=Ce(this,Le)[Le](r),h=u-1,c--;break;case 1:for(r=0,n=Math.pow(2,16),l=1;l!=n;)o=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=i(g.index++)),r|=(o>0?1:0)*l,l<<=1;d[u++]=Ce(this,Le)[Le](r),h=u-1,c--;break;case 2:return f.join("")}if(0==c&&(c=Math.pow(2,w),w++),d[h])p=d[h];else{if(h!==u)return null;p=a+a.charAt(0)}f.push(p),d[u++]=a+p.charAt(0),a=p,0==--c&&(c=Math.pow(2,w),w++)}}}function Fe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Re=0;function Ue(e){return"__private_"+Re+++"_"+e}var Ne=Ue("storageName"),qe=Ue("storageMode"),Be=Ue("sameSite"),He=Ue("domain"),Ke=Ue("canStore"),Ve=Ue("useBinary"),ze=Ue("useBase64"),Je=Ue("buckSize"),Ye=Ue("buckCnt"),Ge=Ue("dataSet"),We=Ue("k5a"),Qe=Ue("checkStorage"),Ze=Ue("getData"),$e=Ue("saveData"),Xe=Ue("getCookie"),et=Ue("saveToCookie"),tt=Ue("resetCookie"),it=Ue("setCookie");class st{constructor(e,t="_k5a",i="cookie"){Object.defineProperty(this,it,{value:dt}),Object.defineProperty(this,tt,{value:ht}),Object.defineProperty(this,et,{value:lt}),Object.defineProperty(this,Xe,{value:nt}),Object.defineProperty(this,$e,{value:ot}),Object.defineProperty(this,Ze,{value:rt}),Object.defineProperty(this,Qe,{value:at}),Object.defineProperty(this,Ne,{writable:!0,value:"_k5a"}),Object.defineProperty(this,qe,{writable:!0,value:"cookie"}),Object.defineProperty(this,Be,{writable:!0,value:"Strict"}),Object.defineProperty(this,He,{writable:!0,value:""}),Object.defineProperty(this,Ke,{writable:!0,value:!1}),Object.defineProperty(this,Ve,{writable:!0,value:!1}),Object.defineProperty(this,ze,{writable:!0,value:!1}),Object.defineProperty(this,Je,{writable:!0,value:950}),Object.defineProperty(this,Ye,{writable:!0,value:4}),Object.defineProperty(this,Ge,{writable:!0,value:null}),Object.defineProperty(this,We,{writable:!0,value:null}),t!==Fe(this,Ne)[Ne]&&""!==t?Fe(this,Ne)[Ne]=t:void 0!==e&&void 0!==e.cfg.storage&&(void 0!==e.cfg.storage.name&&(Fe(this,Ne)[Ne]=e.cfg.storage.name),void 0!==e.cfg.storage.type&&"localstorage"==e.cfg.storage.type&&(i="localstorage"),void 0!==e.cfg.storage.b64&&e.cfg.storage.b64&&(Fe(this,ze)[ze]=!0,e.speaker.say("storage: b64 on")),void 0!==e.cfg.storage.compress&&e.cfg.storage.compress&&(Fe(this,Ve)[Ve]=!0,e.speaker.say("storage: compress on"))),i!=Fe(this,qe)[qe]&&(Fe(this,qe)[qe]=i),Fe(this,We)[We]=e;let s=new _e(location.href);Fe(this,He)[He]=s.domain,Fe(this,Ke)[Ke]=Fe(this,Qe)[Qe](),e.speaker.say("Can store : "+(Fe(this,Ke)[Ke]?"yes":"no")+" storageMode:"+Fe(this,qe)[qe]),Fe(this,Ge)[Ge]=Fe(this,Ze)[Ze]()}canStore(){return Fe(this,Ke)[Ke]}get(){return Fe(this,Ge)[Ge]}set(e){Fe(this,Ge)[Ge]=e,Fe(this,$e)[$e]()}getKey(e){return null==Fe(this,Ge)[Ge]&&(Fe(this,Ge)[Ge]=Fe(this,Ze)[Ze]()),null!==Fe(this,Ge)[Ge]&&void 0!==Fe(this,Ge)[Ge][e]?Fe(this,Ge)[Ge][e][1]>0&&parseInt((new Date).getTime()/1e3)>Fe(this,Ge)[Ge][e][1]?(delete Fe(this,Ge)[Ge][e],Fe(this,$e)[$e](),null):Fe(this,Ge)[Ge][e][0]:null}setKey(e,t,i=0){null==Fe(this,Ge)[Ge]&&(Fe(this,Ge)[Ge]=Fe(this,Ze)[Ze]()),Fe(this,Ge)[Ge][e]=[t,i>0?parseInt((new Date).getTime()/1e3)+i:0],Fe(this,$e)[$e]()}delKey(e){null==Fe(this,Ge)[Ge]&&(Fe(this,Ge)[Ge]=Fe(this,Ze)[Ze]());try{delete Fe(this,Ge)[Ge][e]}catch(t){console.log("could not delete key: "+e)}Fe(this,$e)[$e]()}}function at(){var e=!1;if("cookie"===Fe(this,qe)[qe]){if(navigator&&navigator.cookieEnabled&&(e=!0),!e){var t="__t"+(new Date).getTime();document.cookie=t+"=1",e=-1!==document.cookie.indexOf(t+"="),document.cookie=t+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}}else if("localstorage"===Fe(this,qe)[qe]){e=!1;try{e="object"==(typeof window.localStorage).toLowerCase()}catch(e){console.log("No access to localStorage")}}return e}function rt(){let e;if("localstorage"==Fe(this,qe)[qe]){if(e=localStorage.getItem(Fe(this,Ne)[Ne]),Fe(this,Ve)[Ve]){let t=(new Ie).decompress(e);null!==t&&(e=t)}}else if(e=Fe(this,Xe)[Xe](Fe(this,Ne)[Ne]),Fe(this,ze)[ze]&&null!==e)try{e=decodeURIComponent(atob(e))}catch(e){console.error(e.toString())}if(null==e)return{};try{return JSON.parse(e)}catch(e){console.log("error in data: "+e.toString()),"localstorage"!==Fe(this,qe)[qe]&&Fe(this,tt)[tt]()}return{}}function ot(){let e=JSON.stringify(Fe(this,Ge)[Ge]);"localstorage"==Fe(this,qe)[qe]?(Fe(this,Ve)[Ve]&&(e=(new Ie).compress(e)),localStorage.setItem(Fe(this,Ne)[Ne],e)):(Fe(this,ze)[ze]&&(e=btoa(encodeURIComponent(e))),Fe(this,et)[et](e))}function nt(e){let t="",i=0,s=!1,a=0;for(;(0===i||s)&&i<Fe(this,Ye)[Ye];){let r=e+(i>0?i:"")+"=";if(document.cookie.length>0){let e=document.cookie.indexOf(r);if(-1!=e){e+=r.length;let o=document.cookie.indexOf(";",e);-1==o&&(o=document.cookie.length);let n=document.cookie.substring(e,o);if(n.length>0){if(0==i){let e=n.indexOf("@",0);a=n.substring(0,e),n=n.substr(e+1)}t+=n,s=!0}else s=!1}}i++}return t.length!=a?(console.error("Data is corrupt! - "+t.length+"vs"+a),Fe(this,tt)[tt](),null):t.length>0?t:null}function lt(e){let t=new Date;t.setFullYear(t.getFullYear()+1),Fe(this,tt)[tt]();let i=0,s=e.length+"@"+e.substr(i,Fe(this,Je)[Je]);for(;s.length>0&&i<Fe(this,Ye)[Ye];)try{Fe(this,it)[it](i>0?Fe(this,Ne)[Ne]+i:Fe(this,Ne)[Ne],s,new Date(t),"/",Fe(this,He)[He],Fe(this,Be)[Be]),i++,s=e.substr(Fe(this,Je)[Je]*i,Fe(this,Je)[Je])}catch(e){console.debug(e.toString()),i=1e3}}function ht(){let e=new Date;e.setFullYear(e.getFullYear()-1);for(let t=0;t<4;t++)Fe(this,it)[it](Fe(this,Ne)[Ne]+(t>0?t:""),"",new Date(e),"/",Fe(this,He)[He],Fe(this,Be)[Be])}function dt(e,t,i,s,a,r,o){void 0===r&&(r="Lax"),"None"===r&&(o=!0);var n=e+"="+t+(i?"; Expires="+i.toGMTString():"")+(s?"; Path="+s:"")+(a?"; Domain="+a:"")+(r?"; SameSite="+r:"")+(o?"; Secure":"");document.cookie=n}function ct(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ut=0;function wt(e){return"__private_"+ut+++"_"+e}var pt=wt("channel");class ft{constructor(e=!1,t="domDetection2"){if(Object.defineProperty(this,pt,{writable:!0,value:""}),"domDetection"==t){var i=document.createElement("div");i.style.cssText="position: fixed;top: 0;left: 0;bottom: 0;right: 0;",document.documentElement.insertBefore(i,document.documentElement.firstChild);var s={width:i.offsetWidth,height:i.offsetHeight};console.debug(s);var a=s.width;ct(this,pt)[pt]=a<600?"mobile":"desktop",e&&a>=600&&(/ipad|android|tablet|kindle|silk|nook\s+browser|msie.+touch|xoom\s+build/i.test(navigator.userAgent)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone)&&(ct(this,pt)[pt]="tablet"),document.documentElement.removeChild(i)}else{var r=navigator.userAgent.toLowerCase();-1===r.indexOf("mobile")&&r.indexOf("android")>-1||/(tablet|ipad|playbook|silk|kindle|nook\s+browser|msie.+touch|xoom\s+build)/i.test(r)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone?ct(this,pt)[pt]=e?"tablet":"desktop":/Mobile|iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/i.test(r)?ct(this,pt)[pt]="mobile":ct(this,pt)[pt]="desktop"}}getChannel(){return ct(this,pt)[pt]}}function gt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var vt=0;function bt(e){return"__private_"+vt+++"_"+e}var yt=bt("wordcount");class mt{constructor(e,t){if(Object.defineProperty(this,yt,{writable:!0,value:0}),void 0!==t.wordCount)for(var i of Object.keys(t.wordCount.article))if("cl"==i)for(var s of Object.keys(t.wordCount.article[i]))for(var a=e.getElementsByClassName(s),r=0;r<a.length;r++)n=(n=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.cl[s]?gt(this,yt)[yt]+=n.split(" ").length-1:gt(this,yt)[yt]-=n.split(" ").length-1;else if("el"==i)for(var o of Object.keys(t.wordCount.article[i]))for(a=e.getElementsByTagName(o),r=0;r<a.length;r++){var n;n=(n=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.el[o]?gt(this,yt)[yt]+=n.split(" ").length-1:gt(this,yt)[yt]-=n.split(" ").length-1}}getWordcount(){return gt(this,yt)[yt]}}function kt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ot=0;function Pt(e){return"__private_"+Ot+++"_"+e}var jt=Pt("paywallDetected");class St{constructor(e,t){if(Object.defineProperty(this,jt,{writable:!0,value:""}),null!=e&&void 0!==t.paywall&&void 0!==t.paywall.auto&&t.paywall.auto){if(void 0===t.paywall.element)return console.error("Paywall: missing element configuration"),!1;e.querySelectorAll(t.paywall.element).length>0&&(kt(this,jt)[jt]="hard")}}getPaywall(){return kt(this,jt)[jt]}}function Dt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var _t=0;function Ct(e){return"__private_"+_t+++"_"+e}var At=Ct("referer"),Mt=Ct("qsps"),Lt=Ct("special"),Et=Ct("getQSP");class Tt{constructor(e,t){Object.defineProperty(this,Et,{value:xt}),Object.defineProperty(this,At,{writable:!0,value:""}),Object.defineProperty(this,Mt,{writable:!0,value:["utm_source"]}),Object.defineProperty(this,Lt,{writable:!0,value:{"facebook.com":["fbclid"]}}),void 0!==t.referer&&(Dt(this,Mt)[Mt]=t.referer);for(var i=0;i<Dt(this,Mt)[Mt].length;i++)if(void 0!==Dt(this,Mt)[Mt][i]&&""!=Dt(this,Mt)[Mt][i]&&!1!==(a=Dt(this,Et)[Et](Dt(this,Mt)[Mt][i]))&&""!==a){Dt(this,At)[At]=a;break}if(""===Dt(this,At)[At])for(var s of Object.keys(Dt(this,Lt)[Lt])){for(i=0;i<Dt(this,Lt)[Lt][s].length;i++){var a;if(!1!==(a=Dt(this,Et)[Et](Dt(this,Lt)[Lt][s][i]))){Dt(this,At)[At]=s;break}}if(""!==Dt(this,At)[At])break}""===Dt(this,At)[At]&&document.referrer&&""!==document.referrer&&(Dt(this,At)[At]=document.referrer),""===Dt(this,At)[At]&&(Dt(this,At)[At]="_")}getReferer(){return Dt(this,At)[At]}}function xt(e){var t=e+"=",i=location.href.indexOf(t),s=-1;return i>-1&&(i+=t.length,-1==(s=location.href.indexOf("&",i))&&(s=location.href.indexOf("#",i)),s>-1?decodeURIComponent(location.href.substring(i,s)):decodeURIComponent(location.href.substr(i)))}function It(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ft=0;function Rt(e){return"__private_"+Ft+++"_"+e}var Ut=Rt("autoSection");class Nt{constructor(e,t){if(Object.defineProperty(this,Ut,{writable:!0,value:""}),void 0!==t.autoSection&&t.autoSection&&""!==e){var i=new URL(e).pathname.split("/");i.length>2&&""!==i[1]&&(It(this,Ut)[Ut]=i[1].toLowerCase())}}getSection(){return It(this,Ut)[Ut]}}class qt{getMostVisibleElement(e){var t=window.innerHeight,i=0,s=null;for(var a of Array.from(e)){var r=a.getBoundingClientRect(),o=r.bottom-r.top,n={top:r.top>=0&&r.top<t,bottom:r.bottom>0&&r.bottom<t},l=0;if(n.top&&n.bottom)l=o;else if(n.top)l=t-r.top;else if(n.bottom)l=r.bottom;else if(o>t&&r.top<0){var h=Math.abs(r.top);h<o&&(l=o-h)}l>i&&(i=l,s=a)}return s}}function Bt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ht=0;function Kt(e){return"__private_"+Ht+++"_"+e}var Vt=Kt("readK5AMeta"),zt=Kt("readLPMeta");class Jt{constructor(e,t){switch(Object.defineProperty(this,zt,{value:Gt}),Object.defineProperty(this,Vt,{value:Yt}),t){case"auto":!0!==Bt(this,Vt)[Vt](e)&&Bt(this,zt)[zt](e);break;case"LPMeta":Bt(this,zt)[zt](e);break;default:Bt(this,Vt)[Vt](e,t)}}}function Yt(e,t="k5aMeta"){if(void 0!==window[t]){for(var i=e.getFields(),s=Object.keys(window[t]),a=0;a<i.length;a++)if(void 0!==window[t][i[a]])e.setField(i[a],window[t][i[a]]);else{for(var r=!1,o=0;o<s.length;o++)if((s[o].toLowerCase()==i[a].toLowerCase()||"referrer"==s[o].toLowerCase()&&"referer"==i[a].toLowerCase())&&void 0!==window[t][s[o]]){e.setField(i[a],window[t][s[o]]),r=!0;break}r||e.delField(i[a])}return!0}return!1}function Gt(e){if("undefined"!=typeof LPMeta){var t={url:"url",channel:"channel",image:"image",title:"title",section:"section",type:"type",tag:"tag",cTag:"cntTag",published_time:"publishtime",modified_time:"modifiedtime",paywalluser:"subscriber",paywall:"paid",wordcount:"wordcount",author:"author",conversion:"conversion",converted_user:"conversion",converteduser:"conversion"};for(var i in t)if(void 0!==LPMeta[i]&&""!==LPMeta[i])if("object"==typeof LPMeta[i])for(var s in LPMeta[i])e.setField(t[i],LPMeta[i][s].toLowerCase().trim());else e.setField(t[i],LPMeta[i]);return!0}return!1}function Wt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Qt=0;function Zt(e){return"__private_"+Qt+++"_"+e}var $t=Zt("domElement");class Xt{constructor(e=null){Object.defineProperty(this,$t,{writable:!0,value:null}),Wt(this,$t)[$t]=e}isTranslated(){return!!Wt(this,$t)[$t].querySelector("html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash]")}}function ei(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ti=0;function ii(e){return"__private_"+ti+++"_"+e}var si=ii("k5a"),ai=ii("pageElm"),ri=ii("artElm"),oi=ii("cfg"),ni=ii("prefixes"),li=ii("pData"),hi=ii("result"),di=ii("initFBIAData"),ci=ii("initArticleElement"),ui=ii("autoMeta"),wi=ii("convertField");class pi{constructor(e,t=document,i=null){var s;for(var a in Object.defineProperty(this,wi,{value:bi}),Object.defineProperty(this,ui,{value:vi}),Object.defineProperty(this,ci,{value:gi}),Object.defineProperty(this,di,{value:fi}),Object.defineProperty(this,si,{writable:!0,value:null}),Object.defineProperty(this,ai,{writable:!0,value:null}),Object.defineProperty(this,ri,{writable:!0,value:null}),Object.defineProperty(this,oi,{writable:!0,value:{}}),Object.defineProperty(this,ni,{writable:!0,value:["k5a","kilkaya","og","lp"]}),Object.defineProperty(this,li,{writable:!0,value:{url:{type:"url",auto:function(){return location.href},fields:["url"],param:"u",spaSafe:!1},referer:{type:"string",auto:function(){return new Tt(ei(this,ai)[ai],ei(this,oi)[oi]).getReferer()}.bind(this),fields:["referer","referrer"],param:"r",spaSafe:!0},title:{type:"string",fields:["title"],param:"ptl",spaSafe:!1},section:{type:"string",fields:["section","article:section"],auto:function(){return new Nt(this.getField("url"),ei(this,oi)[oi]).getSection()}.bind(this),param:"psn",spaSafe:!1,lc:!0},subsection:{type:"array",fields:["subsection","article:subsection"],param:"pssn",spaSafe:!1,lc:!0},type:{type:"string",fields:["type"],param:"ptp",spaSafe:!1,lc:!0},image:{type:"url",fields:["image","og:image:url"],param:"pig",spaSafe:!1},author:{type:"array",fields:["author","article:author"],param:"par",spaSafe:!1,lc:!0},tag:{type:"array",fields:["tag","article:tag"],param:"ptg",spaSafe:!1,lc:!0},cnttag:{type:"array",valueRule:/^[a-zA-Z0-9\_]+$/i,fields:["cntTag","article:cntTag"],param:"pctg",spaSafe:!1,lc:!0},contenttag:{type:"array",valueRule:/^[a-zA-Z0-9\_]+$/i,fields:["contentTag"],param:"pstg",spaSafe:!1,lc:!0},channel:{type:"string",fields:["channel"],auto:function(){return new ft(ei(this,oi)[oi].cntTablet||!1).getChannel()}.bind(this),param:"c",spaSafe:!0,undeleteAble:!0},wordcount:{type:"int",fields:["wordcount"],auto:function(){return new mt(ei(this,ai)[ai],ei(this,oi)[oi]).getWordcount()}.bind(this),param:"pwct",spaSafe:!1},publishtime:{type:"datetime",fields:["published_time","article:published_time"],param:"ppt",spaSafe:!1},modifiedtime:{type:"datetime",fields:["modified_time","article:modified_time"],param:"pmt",spaSafe:!1},paywall:{type:"string",fields:["paywall"],auto:function(){return new St(ei(this,ri)[ri],ei(this,oi)[oi]).getPaywall()}.bind(this),param:"pw",spaSafe:!1},paid:{type:"boolean",fields:["paid"],auto:function(){if(ei(this,oi)[oi].paywall&&ei(this,oi)[oi].paywall.autoPaid&&("hard"==ei(this,hi)[hi].paywall||"h"==ei(this,hi)[hi].paywall))return!0}.bind(this),param:"pd",spaSafe:!1},login:{type:"boolean",fields:["login"],param:"ul",spaSafe:!0},subscriber:{type:"boolean",fields:["subscriber"],param:"sbs",spaSafe:!0},conversion:{type:"boolean",fields:["conversion"],param:"cs",spaSafe:!1},userid:{type:"string",fields:["userid","userId"],param:"",spaSafe:!0},subscriberid:{type:"string",fields:["subscriberid"],param:"sbid",spaSafe:!0},consent:{type:"boolean",fields:["consent"],param:"cst",auto:function(){return!0},spaSafe:!0},nopageview:{type:"boolean",fields:["nopageview","nopv"],param:"nopv",spaSafe:!1}}}),Object.defineProperty(this,hi,{writable:!0,value:{}}),ei(this,si)[si]=e,ei(this,ai)[ai]=t,ei(this,oi)[oi]=i,void 0!==ei(this,oi)[oi].prefixes&&(ei(this,ni)[ni]=ei(this,oi)[oi].prefixes),ei(this,ri)[ri]=ei(this,ci)[ci](),ei(this,li)[li])ei(this,ui)[ui](a);void 0!==ei(this,oi)[oi].skipFBIA&&1===ei(this,oi)[oi].skipFBIA||"undefined"==typeof ia_document||ei(this,di)[di](),ei(this,si)[si].speaker.say("Init pagedata read (before jsonMetaData)","pagedata"),ei(this,si)[si].speaker.table(ei(this,hi)[hi],"pagedata"),new Jt(this,null!=(s=ei(this,oi)[oi].jsonMetaData)?s:"auto"),ei(this,si)[si].speaker.say("Init pagedata read:","pagedata"),ei(this,si)[si].speaker.table(ei(this,hi)[hi],"pagedata")}getArticleElement(){return ei(this,ri)[ri]===document?document.body:ei(this,ri)[ri]}reRead(){var e;ei(this,si)[si].speaker.say("ReRead called","pagedata");var t,i=!(!ei(this,oi)[oi].SPA||!ei(this,oi)[oi].SPA.metaData);if(i&&ei(this,oi)[oi].SPA&&"k5aMeta"==ei(this,oi)[oi].SPA.metaData&&"undefined"!=typeof k5aMeta)return this.resetAll(),new Jt(this,null!=(t=ei(this,oi)[oi].jsonMetaData)?t:"auto"),ei(this,hi)[hi].url&&""!==ei(this,hi)[hi].url||this.setField("url",ei(this,li)[li].url.auto()),ei(this,si)[si].speaker.say("Pagedata update - SPA (k5aMeta): "+location.href,"pagedata"),void ei(this,si)[si].speaker.table(ei(this,hi)[hi],"pagedata");let s=ei(this,hi)[hi].url;var a=(new qt).getMostVisibleElement(document.querySelectorAll(ei(this,oi)[oi].article));for(var r in ei(this,ri)[ri]=a,ei(this,li)[li])i||!i&&ei(this,li)[li][r].spaSafe?ei(this,ui)[ui](r):"url"==r?this.setField("url",location.href):ei(this,hi)[hi][r]="";new Jt(this,null!=(e=ei(this,oi)[oi].jsonMetaData)?e:"auto"),ei(this,oi)[oi].SPA&&ei(this,oi)[oi].SPA.skipConversion&&1==ei(this,oi)[oi].SPA.skipConversion&&this.resetField("conversion"),this.setField("paywall",ei(this,li)[li].paywall.auto()),this.setField("paid",ei(this,li)[li].paid.auto()),""==this.getField("referer")&&this.setField("referer",s),ei(this,si)[si].speaker.say("Pagedata update - SPA: "+location.href,"pagedata"),ei(this,si)[si].speaker.table(ei(this,hi)[hi],"pagedata")}setData(e){for(var t in e)this.setField(t,e[t])}setField(e,t){if(null!=t&&("referrer"==(e=e.toLowerCase())&&(e="referer"),void 0!==ei(this,li)[li][e]&&""!==t))switch(ei(this,li)[li][e].type){case"url":if(!ei(this,oi)[oi].forceRealUrl&&""!=t&&"/"!=t||"url"!=e){var i=this.isUrl(t);if(!1===i)throw new Error("given url is not valid: "+t);ei(this,hi)[hi][e]=i.trim()}else ei(this,hi)[hi][e]=ei(this,li)[li].url.auto();break;case"string":let r=t.trim();void 0!==ei(this,li)[li][e].lc&&ei(this,li)[li][e].lc&&(r=r.toLowerCase()),ei(this,hi)[hi][e]=r;break;case"array":if("object"==typeof t){for(var s in t)if(t.hasOwnProperty(s)&&void 0!==t[s]&&"undefined"!==t[s]&&null!==t[s]){let i=t[s].toString().trim();if(void 0!==ei(this,li)[li][e].lc&&ei(this,li)[li][e].lc&&(i=i.toLowerCase()),void 0!==ei(this,li)[li][e].valueRule&&ei(this,li)[li][e].valueRule&&null==t.match(ei(this,li)[li][e].valueRule))return void ei(this,si)[si].speaker.error("Invalid value for "+e+" value: |"+t+"|");void 0===ei(this,hi)[hi][e]||""===ei(this,hi)[hi][e]?ei(this,hi)[hi][e]=[i]:ei(this,hi)[hi][e].includes(i)||ei(this,hi)[hi][e].push(i)}}else if(void 0!==t&&"undefined"!==t&&null!==t){if(t=t.toString().trim(),void 0!==ei(this,li)[li][e].lc&&ei(this,li)[li][e].lc&&(t=t.toLowerCase()),void 0!==ei(this,li)[li][e].valueRule&&ei(this,li)[li][e].valueRule&&null==t.match(ei(this,li)[li][e].valueRule))return void ei(this,si)[si].speaker.error("Invalid value for "+e+" value: |"+t+"|");void 0===ei(this,hi)[hi][e]||""===ei(this,hi)[hi][e]?ei(this,hi)[hi][e]=[t]:ei(this,hi)[hi][e].includes(t)||ei(this,hi)[hi][e].push(t)}break;case"boolean":ei(this,hi)[hi][e]="true"==t||1==t||"yes"==t||"1"==t?1:0;break;case"int":var a=parseInt(t);isNaN(a)||(ei(this,hi)[hi][e]=a);break;case"datetime":a=Date.parse(t),isNaN(a)||(ei(this,hi)[hi][e]=t)}}getField(e){return"domain"==e?new _e(this.getField("url")).domain:(e=e.toLowerCase(),void 0!==ei(this,li)[li][e]&&void 0!==ei(this,hi)[hi][e]?ei(this,hi)[hi][e]:void 0!==ei(this,hi)[hi][e]&&""!=ei(this,hi)[hi][e]||void 0===ei(this,li)[li][e].auto?null:ei(this,li)[li][e].auto()||null)}delField(e){return void 0!==ei(this,li)[li][e]&&void 0!==ei(this,hi)[hi][e]&&void 0!==ei(this,li)[li][e].undeleteAble&&!ei(this,li)[li][e].undeleteAble&&(delete ei(this,hi)[hi][e],!0)}resetField(e){return!(void 0!==ei(this,li)[li][e].undeleteAble&&ei(this,li)[li][e].undeleteAble||void 0===ei(this,li)[li][e]||void 0===ei(this,hi)[hi][e]||(ei(this,hi)[hi][e]="",0))}resetAll(){var e=ei(this,hi)[hi].channel;ei(this,hi)[hi]=[],ei(this,hi)[hi].channel=e}getFields(){return Object.keys(ei(this,li)[li])}getData(){return structuredClone(ei(this,hi)[hi])}getLogData(e=null){var t={};null===e&&(e=Object.keys(ei(this,hi)[hi]));for(var i=0;i<e.length;i++)t[ei(this,li)[li][e[i]].param]=ei(this,hi)[hi][e[i]]?ei(this,hi)[hi][e[i]]:"";return t}getDefaultFields(){return["url","image","channel","type","section","subsection","title","wordcount","author","tag","cnttag","contenttag","publishtime","modifiedtime","paywall","paid","subscriber","conversion","referer","login"]}getDefaultData(){return this.getLogData(this.getDefaultFields())}isUrl(e){null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/\//i)&&(e=location.protocol+"//"+location.hostname+e);try{var t=new URL(e,document.baseURI).href;t!==e&&(e=t)}catch(e){console.log(e.toString())}return(-1!==e.toLowerCase().indexOf("http://")||-1!==e.toLowerCase().indexOf("https://"))&&e}getMetaField(e,t=null){var i=ei(this,ai)[ai].querySelectorAll('meta[property="'+e+'"],meta[name="'+e+'"]');if(i&&i.length>0){for(var s=[],a=0;a<i.length;a++)if(i[a].hasAttribute("content")){var r=i[a].getAttribute("content");if("boolean"===t)return"1"==r||1==r||"yes"==r;null!==r&&""!=r&&s.push(r)}if(s.length>0)return s}return null}isTranslated(){return new Xt(ei(this,ai)[ai]).isTranslated()}}function fi(){if("undefined"!=typeof ia_document){this.setField("url",ia_document.shareURL),this.setField("title",ia_document.title);var e=ia_document.referrer||"https://ia.facebook.com/";-1==e.indexOf("http")&&(e="https://"+e),this.setField("referer",e),this.setField("channel",this.getField("channel")+"_fbia")}}function gi(){if(ei(this,oi)[oi].article){var e=ei(this,ai)[ai].querySelector(ei(this,oi)[oi].article);if(null!==e)return e}return ei(this,ai)[ai]}function vi(e){this.resetField(e),ei(this,li)[li][e];for(var t=0;t<ei(this,li)[li][e].fields.length;t++)for(var i=0;i<ei(this,ni)[ni].length;i++){let o=-1==ei(this,li)[li][e].fields[t].indexOf(":")?ei(this,ni)[ni][i]+":"+ei(this,li)[li][e].fields[t]:ei(this,li)[li][e].fields[t];var s=ei(this,ai)[ai].querySelectorAll('meta[property="'+o+'"i],meta[name="'+o+'"i]');if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a].getAttribute("content");if(null!==r&&""!=r&&("lp"==ei(this,ni)[ni][i]&&(r=ei(this,wi)[wi](ei(this,ni)[ni][i],e,r)),""!==r&&(this.setField(e,r),void 0!==ei(this,hi)[hi][e]&&"array"!=ei(this,li)[li][e].type)))return}}void 0===ei(this,hi)[hi][e]&&void 0!==ei(this,li)[li][e].auto&&this.setField(e,ei(this,li)[li][e].auto())}function bi(e,t,i){if("lp"==e&&"paywall"==t){if("1"===i||"h"===i||"hard"===i)return this.setField("paid",!0),""}else{var s={lp:{paywall:{1:"hard",0:""}}};if(s[e]&&s[e][t]&&s[e][t][i])return s[e][t][i]}return i}function yi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var mi=0;function ki(e){return"__private_"+mi+++"_"+e}var Oi=ki("pingData"),Pi=ki("asyncTTL"),ji=ki("reqIdHistory");class Si{constructor(e){this.k5a=null,Object.defineProperty(this,Oi,{writable:!0,value:{userActive:0,pings:[]}}),this.supportAsync=!1,Object.defineProperty(this,Pi,{writable:!0,value:1e4}),Object.defineProperty(this,ji,{writable:!0,value:[]}),this.k5a=e}addHook(e,t,i=!1){this.k5a.listener.addHook(e,t,i)}addUserActiveHook(e,t,i){this.k5a.listener.addUserActiveHook(e,t,i)}isAutoEnabled(e){return void 0===this.k5a.cfg.moduleCfg[e]||void 0===this.k5a.cfg.moduleCfg[e].autoDisabled||!0!==this.k5a.cfg.moduleCfg[e].autoDisabled}addAsyncData(e,t,i){var s=this.k5a.storage.getKey("as");null===s&&(s={}),void 0===s[e]&&(s[e]={}),void 0===s[e][t]&&(s[e][t]=[]),i._reqId=this.k5a.requestId,s[e][t].push(i),this.k5a.storage.setKey("as",s,yi(this,Pi)[Pi])}getAsyncData(e){var t=this.k5a.storage.getKey("as");return null!==t&&void 0!==t[e]&&t[e]}runAsyncData(e,t,i=!1,s=!1){let a=this.k5a.requestId+"_"+e+"_"+t;if(yi(this,ji)[ji].indexOf(a)>-1)return void this.k5a.speaker.say("as sync with id '"+a+"' already done!");yi(this,ji)[ji].push(a);let r=this.k5a.storage.getKey("as"),o={};null!==r&&void 0!==r[e]&&(Object.keys(r).forEach((a=>{a===e?Object.keys(r[a]).forEach((n=>{if("*"===t||n===t)for(var l=0;l<r[e][n].length;l++)if(s||r[e][n][l]._reqId!==this.k5a.requestId)if(delete r[e][n][l]._reqId,i)try{var h=i(r[e][n][l]);!1!==h&&this.k5a.logger.fireNow(n,h,"storage")}catch(e){console.error(e.toString())}else this.k5a.logger.fireNow(n,r[e][n][l],"storage");else void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]=[]),o[a][n].push(r[e][n][l]),console.log("k5a: not running this AS data as we are on same requestId - "+r[e][n][l]._reqId+" vs k5a:"+this.k5a.requestId)})):Object.keys(r[a]).length>0&&(o[a]=r[a])})),Object.keys(o).length>0?this.k5a.storage.setKey("as",o,yi(this,Pi)[Pi]):this.k5a.storage.delKey("as"))}say(e){this.k5a.speaker.say(e,this.constructor.name)}warn(e){this.k5a.speaker.warn(e,this.constructor.name)}error(e){this.k5a.speaker.error(e,this.constructor.name)}clearAsyncData(e){}keysToLowerCase(e){var t={};return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}}function Di(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Si.moduleName="logmodule";var _i=0;function Ci(e){return"__private_"+_i+++"_"+e}var Ai=Ci("pingInterval"),Mi=Ci("userTTL"),Li=Ci("lastActive"),Ei=Ci("lastPing"),Ti=Ci("logData"),xi=Ci("intId"),Ii=Ci("activities"),Fi=Ci("stop"),Ri=Ci("getTime");class Ui extends Si{constructor(e){super(e),Object.defineProperty(this,Ri,{value:qi}),Object.defineProperty(this,Fi,{value:Ni}),Object.defineProperty(this,Ai,{writable:!0,value:30}),Object.defineProperty(this,Mi,{writable:!0,value:60}),Object.defineProperty(this,Li,{writable:!0,value:0}),Object.defineProperty(this,Ei,{writable:!0,value:0}),Object.defineProperty(this,Ti,{writable:!0,value:{}}),Object.defineProperty(this,xi,{writable:!0,value:!1}),Object.defineProperty(this,Ii,{writable:!0,value:[]}),Di(this,Ti)[Ti]=this.k5a.pageData.getDefaultData(),Di(this,Ti)[Ti].uid=this.k5a.user.getId(),Di(this,Li)[Li]=Di(this,Ri)[Ri](),this.addHook("activity",function(e){Di(this,Li)[Li]=Di(this,Ri)[Ri](),this.start()}.bind(this)),this.addHook("hidden",function(e){Di(this,Fi)[Fi]()}.bind(this),!0),this.addHook("active",function(e){Di(this,Li)[Li]=Di(this,Ri)[Ri](),this.checkActivity()}.bind(this),!0)}start(){!1===Di(this,xi)[xi]&&(Di(this,xi)[xi]=setInterval(function(){this.checkActivity()}.bind(this),1e3*Di(this,Ai)[Ai]))}checkActivity(){var e=Di(this,Ri)[Ri]();if(!(0!==Di(this,Ei)[Ei]&&e-Di(this,Ei)[Ei]<Di(this,Ai)[Ai])){for(var t=!1,i=[],s=0;s<Di(this,Ii)[Ii].length;s++)try{var a=Di(this,Ii)[Ii][s]();if(!1!==a&&(t=!0,Di(this,Li)[Li]=Di(this,Ri)[Ri](),"object"==typeof a&&a.length>0))for(s=0;s<a.length;s++){var r=Di(this,Ti)[Ti];Object.keys(a[s]).forEach((e=>{r[e]=a[s][e]})),i.push(r)}}catch(e){console.error("Could not call callback: "+e.toString())}if(!t&&e-Di(this,Li)[Li]<=Di(this,Mi)[Mi]&&!1!==Di(this,xi)[xi]&&(t=!0),t){for(void 0!==this.k5a.cfg.activeUsers&&1==this.k5a.cfg.activeUsers&&i.push(Di(this,Ti)[Ti]),s=0;s<i.length;s++)this.k5a.logger.fireNow("activity",i[s],"js");Di(this,Ei)[Ei]=e}else this.k5a.listener.fireHook("hidden"),Di(this,Fi)[Fi]()}}addActivity(e){Di(this,Ii)[Ii].push(e)}}function Ni(){clearInterval(Di(this,xi)[xi]),Di(this,xi)[xi]=!1}function qi(){return parseInt((new Date).getTime()/1e3)}function Bi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Hi=0;function Ki(e){return"__private_"+Hi+++"_"+e}var Vi=Ki("length"),zi=Ki("data"),Ji=Ki("ttl"),Yi=Ki("defaultSessionTTL"),Gi=Ki("wasNewSession"),Wi=Ki("name"),Qi=Ki("store"),Zi=Ki("cannotStore"),$i=Ki("UUID");class Xi{constructor(e,t="u",i=16){Object.defineProperty(this,$i,{value:ts}),Object.defineProperty(this,Zi,{value:es}),Object.defineProperty(this,Vi,{writable:!0,value:16}),Object.defineProperty(this,zi,{writable:!0,value:{}}),Object.defineProperty(this,Ji,{writable:!0,value:9e4}),Object.defineProperty(this,Yi,{writable:!0,value:1800}),Object.defineProperty(this,Gi,{writable:!0,value:!1}),this.k5a=null,Object.defineProperty(this,Wi,{writable:!0,value:"u"}),Object.defineProperty(this,Qi,{writable:!0,value:null}),this.k5a=e,Bi(this,Vi)[Vi]=i,Bi(this,Wi)[Wi]=t,e.consent&&this.k5a.storage.canStore()?(Bi(this,zi)[zi]=this.k5a.storage.getKey(t),null!==Bi(this,zi)[zi]?(Bi(this,Gi)[Gi]=Bi(this,zi)[zi].ts+Bi(this,Yi)[Yi]<parseInt((new Date).getTime()/1e3),Bi(this,zi)[zi].ts=parseInt((new Date).getTime()/1e3)):(Bi(this,Gi)[Gi]=!0,Bi(this,zi)[zi]={uid:Bi(this,$i)[$i](),ts:parseInt((new Date).getTime()/1e3)}),this.k5a.storage.setKey(Bi(this,Wi)[Wi],Bi(this,zi)[zi],Bi(this,Ji)[Ji])):Bi(this,Zi)[Zi]()}setId(e=""){return!(!this.k5a.consent||null===e.match(/^[a-zA-Z0-9\-\_\.]{4,128}$/)||(Bi(this,zi)[zi].uid=e,Bi(this,zi)[zi].ts=parseInt((new Date).getTime()/1e3),this.k5a.storage.setKey(Bi(this,Wi)[Wi],Bi(this,zi)[zi],Bi(this,Ji)[Ji]),0))}getId(){return Bi(this,zi)[zi].uid}getLastSeen(){return Bi(this,zi)[zi].ts}isNewSession(){return Bi(this,Gi)[Gi]}}function es(){Bi(this,zi)[zi].uid="_",Bi(this,Gi)[Gi]=!1}function ts(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,i=[],s=0;s<Bi(this,Vi)[Vi];s++)i[s]=e[0|Math.random()*t];return i.join("")}function is(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ss=0;function as(e){return"__private_"+ss+++"_"+e}var rs=as("modules"),os=as("insId"),ns=as("initializeModules"),ls=as("setupApiMethods"),hs=as("setupCustomCfg");class ds{constructor(e,t=!1){Object.defineProperty(this,hs,{value:ws}),Object.defineProperty(this,ls,{value:us}),Object.defineProperty(this,ns,{value:cs}),this.cfg={},Object.defineProperty(this,rs,{writable:!0,value:{}}),this.speaker=null,this.logger=null,this.storage=null,this.k5aServer="//l.kilkaya.com/",Object.defineProperty(this,os,{writable:!0,value:""}),this.element=document,this.pageData=null,this.user=null,this.consent=!0,this.requestId=(new Date).getTime(),this.cfg=e,["installationId","logServer","logscript_commitsha","modules"].forEach((e=>{void 0===this.cfg[e]&&console.error("K5A: missing config option: '"+e+"'")})),void 0===this.cfg.moduleCfg&&(this.cfg.moduleCfg={}),void 0!==this.cfg.logServer&&(this.k5aServer=this.cfg.logServer),this.speaker=new X(this,t),this.storage=new st(this),this.speaker.checkPersistentDebugMode(),this.logger=new me(this),this.pageData=new pi(this,this.element,this.cfg.pageData||{}),this.listener=new D(this),this.consent=this.pageData.getField("consent"),!1===this.cfg.hasConsent&&(this.consent=!1),this.user=new Xi(this),this.user.setId(this.pageData.getField("userId")||""),this.active=new Ui(this),is(this,hs)[hs](),is(this,ns)[ns](),this.listener.postInitialize()}debugModeOn(){this.speaker.setPersistentDebugMode(!0)}debugModeOff(){this.speaker.setPersistentDebugMode(!1)}devModeOn(){this.speaker.setPersistentDebugMode(!0,!0)}devModeOff(){this.speaker.setPersistentDebugMode(!1)}set debugMode(e=!1){this.speaker.debugMode(e)}set debugUrl(e=!1){this.speaker.debugUrl(e)}disableLog(){this.logger.disable()}enableLog(){this.logger.enable()}resetRequestId(){this.requestId=(new Date).getTime()}}function cs(){for(var e=0;e<this.cfg.modules.length;e++){var t=this.cfg.modules[e].moduleName;this.speaker.say('Loading module "'+t+'"');try{var i;is(this,rs)[rs][t]=new this.cfg.modules[e](this,null!=(i=this.cfg.moduleCfg[t])?i:{}),"function"==typeof is(this,rs)[rs][t].apiMethods&&is(this,ls)[ls](is(this,rs)[rs][t].apiMethods())}catch(t){this.speaker.say('Could not load log module: "'+this.cfg.modules[e]+'", reason: '+t.toString())}}}function us(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}function ws(){let e=["pageview","click","engagement","video"],t=this.pageData.getField("domain");if(void 0!==this.cfg){let t=!1;if(void 0===this.cfg.disableRefresh&&(this.cfg.disableRefresh=!0),0!==this.cfg.disableRefresh&&!1!==this.cfg.disableRefresh){let e=["refresh","autoRefresh","noLog"];"object"==typeof this.cfg.disableRefresh&&this.cfg.disableRefresh.length>0&&(e=this.cfg.disableRefresh);for(const i of e)if(this.pageData.getMetaField("k5a:"+i,"boolean")){t=!0;break}t||null===location.href.match(new RegExp("[#?&](?:"+e.join("|")+")","i"))||(this.speaker.say("Disabled via url parameter"),t=!0)}if(void 0!==this.cfg.disableBots&&void 0!==navigator.userAgent){let e=["bot","spider","scraper","bing","crawler","cxense","search","yandex","cookiebot"];if("object"==typeof this.cfg.disableBots&&this.cfg.disableBots.length>0)for(const t of this.cfg.disableBots)e.push(t);null!==navigator.userAgent.match(new RegExp(e.join("|"),"i"))&&(t=!0)}t&&e.forEach((e=>{void 0===this.cfg.moduleCfg[e]&&(this.cfg.moduleCfg[e]={}),this.cfg.moduleCfg[e].autoDisabled=!0,this.speaker.say("Module disabled via option: "+e)}))}"undefined"!=typeof k5aMeta&&Object.keys(k5aMeta).forEach((t=>{if(!0===k5aMeta[t]||1===k5aMeta[t]||"1"===k5aMeta[t]||"yes"===k5aMeta[t]){var i=t.substr(7).toLowerCase();e.includes(i)&&(this.speaker.say("Disabling "+i+" auto logging"),void 0===this.cfg.moduleCfg[i]?this.cfg.moduleCfg[i]={autoDisabled:!0}:this.cfg.moduleCfg[i].autoDisabled=!0)}})),e.forEach((e=>{void 0!==this.cfg.moduleCfg[e]&&void 0!==this.cfg.moduleCfg[e].disableFor&&this.cfg.moduleCfg[e].disableFor.includes(t)&&(this.speaker.say("Disabling "+e+' auto logging, "'+t+'" is banned in disableFor'),this.cfg.moduleCfg[e].autoDisabled=!0)}))}function ps(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var fs=0;function gs(e){return"__private_"+fs+++"_"+e}var vs=gs("logData"),bs=gs("frontpages"),ys=gs("activityPWDone"),ms=gs("isOnFrontpage"),ks=gs("setupData");class Os extends Si{constructor(e){super(e),Object.defineProperty(this,ks,{value:js}),Object.defineProperty(this,ms,{value:Ps}),Object.defineProperty(this,vs,{writable:!0,value:{}}),Object.defineProperty(this,bs,{writable:!0,value:["www.aasavis.no","www.abcnyheter.no","www.adressa.no","www.aftenbladet.no","www.aftenposten.no","www.agderposten.no","www.aktivtrening.no","www.altaposten.no","www.altomfotball.no/element.do","www.alvdalmiv.no","www.amta.no","www.an.no","www.andalsnes-avis.no","www.ao.no","www.auraavis.no","www.austagderblad.no","www.av-avis.no","www.avisa-hordaland.no","www.avisa-st.no","www.avisa-valdres.no","www.avisenagder.no","www.ba.no","www.banett.no","www.bladet.no","www.blv.no","bo-bedre.no","www.bomlo-nytt.no","www.bt.no","www.budstikka.no","www.byas.no","www.bygdanytt.no","www.bygdebladet.no","www.bygdeposten.no","costume.no","www.dagbladet.no","www.dagen.no","www.dagsavisen.no","www.dalane-tidende.no","www.direktesport.no","www.diskusjon.no","www.dn.no","www.doktoronline.no","www.dolen.no","www.drangedalsposten.no","www.driva.no","www.dt.no","e24.no","www.eikerbladet.no","www.elbil24.no","www.enebakkavis.no","www.eub.no","www.f-b.no","www.finansavisen.no","www.finn.no","www.finnmarksposten.no","www.firda.no","www.firdaposten.no","www.firdatidend.no","www.fiskeribladet.no","www.fjordabladet.no","www.fjordingen.no","www.fjt.no","www.fjuken.no","www.folkebladet.no","forskning.no","www.fosna-folket.no","www.framtidinord.no","www.fremover.no","www.frostingen.no","www.fvn.no","www.gat.no","www.gbnett.no","www.gd.no","www.gdhytte.no","www.gjengangeren.no","www.glomdalen.no","www.godt.no","www.h-a.no","www.h-avis.no","www.ha-halden.no","www.hadeland.no","www.hallingdolen.no","www.hamar-dagblad.no","www.hardanger-folkeblad.no","www.hblad.no","www.helg.no","www.hf.no","www.hitra-froya.no","www.ht.no","www.hyttavaar.no","www.ialta.no","www.ifinnmark.no","www.ilevanger.no","www.inderoyningen.no","www.indre.no","www.innherred.no","www.intrafish.no","www.isandnessjoen.no","www.itromso.no","www.jarlsbergavis.no","www.jbl.no","www.kirkenesby.no","www.kk.no","www.klartale.no","klassekampen.no","www.klikk.no/index","www.klikk.no","www.kvasir.no","www.kode24.no","www.kv.no","forum.kvinneguiden.no","www.kvinnheringen.no","www.laagendalsposten.no","www.l-a.no","www.lister24.no","www.lierposten.no","www.lofot-tidende.no","www.lofotposten.no","www.lokal-avisa.no","www.lp.no","www.lyngdalsavis.no","www.midtnorskdebatt.no","www.mitthammerfest.no","www.mittjessheim.no","www.mittlillehammer.no","www.mittlillestrom.no","www.morenytt.no","www.morgenbladet.no","www.moss-avis.no","www.namdalsavisa.no","www.nationen.no","www.nettavisen.no","www.nidaros.no","www.noblad.no","www.nord24.no","www.norddalen.no","www.nordhordland.no","www.nordlys.no","www.nordnorskdebatt.no","www.nrk.no","nrkbeta.no","nrksuper.no","www.nt24.no","nye-troms.no","www.oa.no","www.oblad.no","www.op.no","www.opdalingen.no","www.osogfusa.no","www.ostlendingen.no","www.oyene.no","p3.no","www.pd.no","www.pent.no","www.r-a.no","www.rablad.no","www.ranablad.no","www.raumnes.no","www.rb.no","www.rbnett.no","www.retten.no","www.rha.no","www.ringblad.no","www.ringsaker-blad.no","www.sa.no","saltenposten.no","www.sandeavis.no","www.sandnesposten.no","www.sb.no","www.seher.no","www.setesdolen.no","www.smaalenene.no","www.smp.no","www.snasningen.no","www.sognavis.no","sol.no","www.solabladet.no","www.stangeavisa.no","www.startsida.no","www.startsiden.no","www.steinkjer-avisa.no","www.strandbuen.no","www.strilen.no","www.suldalsposten.no","www.sunnhordland.no","www.sunnmoringen.no","www.svelviksposten.no","www.t-a.no","www.ta.no","www.tb.no","www.tek.no","www.telen.no","www.tipster.no","www.tk.no","www.totenidag.no","trd.by","www.tromsoby.no","www.tronderbladet.no","www.tronderdebatt.no","www.tv2.no","www.tvedestrandsposten.no","www.tynsetingen.no","www.tysnesbladet.no","www.vaksdalposten.no","www.varden.no","www.varingen.no","www.venneslatidende.no","www.verdidebatt.no","www.vest24.no","www.vestbyavis.no","www.vestlandsnytt.no","www.vestnytt.no","www.vestviken24.no","www.vg3.no","www.vg2.no","www.vg.no","vgd.no","vglive.no","www.vgtv.no/hjem","www.vgtv.no","www.vi.no","www.vigga.no","www.vikebladet.no","www.vl.no","www.opp.no","www.nyss.no","www.mn24.no","www.steinkjer24.no","www.vol.no","www.vredens-gnag.no","www.vtb.no","ytringen.no"]}),Object.defineProperty(this,ys,{writable:!0,value:!1}),"desktop"==this.k5a.pageData.getField("channel")&&this.addHook("activity",function(e){ps(this,ys)[ys]||(ps(this,ys)[ys]=!0,this.k5a.speaker.say("user is active"),ps(this,ks)[ks](),this.k5a.speaker.say("AY pageview...."),ps(this,vs)[vs].ul=0,ps(this,vs)[vs].sbs=0,ps(this,vs)[vs].ns=0,ps(this,vs)[vs].nopv=1,this.k5a.logger.fireNow("pageView",ps(this,vs)[vs],"activity","js"))}.bind(this)),this.addHook("pageView",function(e){ps(this,ks)[ks](),this.k5a.speaker.say("AY pageview...."),e.persisted&&(ps(this,vs)[vs].ns=0),this.k5a.logger.addData("pageView",ps(this,vs)[vs])}.bind(this)),this.addHook("spa",function(e){this.k5a.pageData.reRead();var t=this.k5a.pageData.getLogData(["url","channel","type","section","subscriber","login"]),i=!1;for(var s in t)ps(this,vs)[vs][s]!==t[s]&&(ps(this,vs)[vs][s]=t[s],"u"==s&&(i=!0));(!i||this.k5a.cfg&&this.k5a.cfg.spaHref)&&(ps(this,vs)[vs].u=location.href,this.k5a.pageData.setField("url",location.href)),ps(this,ks)[ks](),ps(this,vs)[vs].ns=0,this.k5a.logger.fireNow("pageView",ps(this,vs)[vs],"spa")}.bind(this),!0),this.k5a.logPageview=function(e){let t=this.k5a.pageData.getData();for(var i of Object.keys(e))this.k5a.pageData.setField(i,e[i]);ps(this,ks)[ks](),void 0!==e.nopv&&1==e.nopv&&(ps(this,vs)[vs].nopv=1),ps(this,vs)[vs].u===t.url&&Object.entries({subscriber:"sbs",login:"ul"}).forEach((([e,i])=>{void 0!==t[e]&&t[e]&&(ps(this,vs)[vs][i]=0)})),void 0!==e.new_session&&1===e.new_session||(ps(this,vs)[vs].ns=0),this.k5a.pageData.setData(t),this.k5a.logger.fireNow("pageView",ps(this,vs)[vs],"jsapi")}.bind(this)}apiMethods(){return{updateUser:function(e){return["subscriber","login"].forEach((t=>{void 0===e[t]&&(e[t]=0)})),e.ns=0,e.nopv=1,this.k5a.logPageview(e)}.bind(this)}}}function Ps(){var e=this.k5a.pageData.getField("url").match(/https?\:\/\/([^\?\;\#\&]+)/i);if(e&&e.length&&e.length>1){var t=e[1].replace(/\/$/,"");this.k5a.speaker.say("Checking if "+t+" is a frontpage!");for(var i=0;i<ps(this,bs)[bs].length;i++)if(t.toLowerCase()==ps(this,bs)[bs][i].toLowerCase())return this.k5a.speaker.say("MATCH: "+ps(this,bs)[bs][i]),!0}return!1}function js(){ps(this,vs)[vs]=this.k5a.pageData.getLogData(["url","channel","type","section","subscriber","login","subscriberid"]),ps(this,vs)[vs].lcid="na","undefined"!=typeof _MBLCID&&(ps(this,vs)[vs].lcid=_MBLCID);let e=["mblMeta","k5aMeta","LPMeta"];for(var t=0;t<e.length;t++)if(void 0!==window[e[t]]){var i=window[e[t]];void 0!==i.userid&&""!==i.userid&&(ps(this,vs)[vs].uid=i.userid,this.k5a.user.setId(ps(this,vs)[vs].uid)),void 0!==i.new_session&&""!==i.new_session&&(ps(this,vs)[vs].ns=1==i.new_session||"1"==i.new_session?1:0),void 0!==i.channel&&""!==i.channel&&(ps(this,vs)[vs].c=i.channel),void 0!==i.subscriberid&&i.subscriberid.trim().length>=8&&i.subscriberid.trim().length<=32&&(ps(this,vs)[vs].sbid=i.subscriberid);break}void 0!==ps(this,vs)[vs].uid&&""!=ps(this,vs)[vs].uid||(ps(this,vs)[vs].uid=this.k5a.user.getId()),void 0!==ps(this,vs)[vs].ns&&""!=ps(this,vs)[vs].ns||(ps(this,vs)[vs].ns=this.k5a.user.isNewSession()?1:0)}if(!window.mblk5a){var Ss=location.href.indexOf("mblDebug")>-1;function _s(e){for(var t=["mbl","k5a","LP","lp"],i=0;i<t.length;i++){Cs("meta lookup: "+t[i]+":"+e);var s=document.querySelector('meta[property="'+t[i].toLowerCase()+":"+e+'"]');if(null!==s&&s.hasAttribute("content"))return Cs("meta lookup -> "+t[i].toLowerCase()+":"+e+" = "+s.content),s.content;Cs("meta lookup -> "+t[i].toLowerCase()+":"+e+" = not found");var a=t[i]+"Meta";if(void 0!==window[t[i]+"Meta"]){if(void 0!==window[a][e])return Cs("found in meta object -> "+a+"."+e+" = "+window[a][e]),""+window[a][e]}else Cs("No such meta object: "+a)}return""}function Cs(e){Ss&&console.log("mbl: "+e)}if("undefined"!=typeof navigator&&void 0!==navigator.userAgent&&null===navigator.userAgent.match(/(bot|spider|scraper|bing|crawler|cxense|search|yandex)/i)&&-1==location.href.toLowerCase().indexOf("autorefresh")&&-1==location.href.toLowerCase().indexOf("refresh")&&-1==location.href.toLowerCase().indexOf("nolog")&&"1"!==_s("autorefresh")&&"1"!==_s("refresh")&&"1"!==_s("nolog"))var Ds=new ds({logscript_commitsha:"generation2",installationId:"607d77e46bf6b242026472c2",logServer:"https://cl-eu5.k5a.io/",storage:{name:"__mbl"},modules:[Os],pageData:{prefixes:["mbl","k5a","lp","og"],cntTablet:1,skipFBIA:1,jsonMetaData:("undefined"!=typeof mblMeta?"mbl":"undefined"!=typeof k5aMeta?"k5a":"LP")+"Meta",SPA:{metaData:!1,viewTime:0,onlyOnce:!1}}},Ss);window.mblk5a=Ds}})();