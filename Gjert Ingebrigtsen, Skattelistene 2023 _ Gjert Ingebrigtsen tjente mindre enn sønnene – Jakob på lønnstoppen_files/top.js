var T=Object.defineProperty;var a=(l,t)=>T(l,"name",{value:t,configurable:!0});import{UserDataRequest as U}from"https://assets.acdn.no/pkg/@amedia/user/v0/user.js";import{UserDataRequest as D}from"https://assets.acdn.no/pkg/@amedia/user/v0/user.js";window.addEventListener("userdata.data",l=>{let t=l.detail||{},{method:e="",resolve:i=a(()=>{},"resolve"),reject:s=a(()=>{},"reject")}=t;e==="getUserData"&&(t.handled||(t.handled=!0,new D().withAttributes(["extraData","privacyPreferences","uuid"]).fetch().then(n=>{let{extraData:r={},privacyPreferences:o={},uuid:d=""}=n.attributes,c={uuid:d,...r,privacy_preferences:o};i(c)}).catch(n=>s(n))))});window.addEventListener("userdata.ready",()=>window.dispatchEvent(new CustomEvent("userdata.live",{detail:"3.7.19"})));window.dispatchEvent(new CustomEvent("userdata.live",{detail:"3.7.19"}));var f=class f extends HTMLElement{render(){if(this.rendered)return this;let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 14 10");let e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d","M2,2 L7,7 L12,2"),t.appendChild(e);let i=document.createElementNS("http://www.w3.org/2000/svg","animate");return i.setAttribute("attributeType","XML"),i.setAttribute("attributeName","d"),i.setAttribute("dur","0.15"),i.setAttribute("begin","click"),i.setAttribute("repeatCount",1),i.setAttribute("fill","freeze"),this.animateValues=["M2,2 L7,7 L12,2;","M2,7 L7,2 L12,7;"],i.setAttribute("from",this.animateValues[1]),i.setAttribute("to",this.animateValues[0]),e.appendChild(i),this.animate=i,this.appendChild(t),this.rendered=!0,this}toggle(){"beginElement"in this.animate&&(this.animate.beginElement(),this.animateValues.push(this.animateValues.shift()),this.animate.setAttribute("from",this.animateValues[1]),this.animate.setAttribute("to",this.animateValues[0]))}connectedCallback(){this.rendered||this.render()}attachedCallback(){this.rendered||this.render()}};a(f,"AidArrow");var m=f;customElements&&customElements.define?customElements.define("amedia-user-arrow",m):document.registerElement("amedia-user-arrow",{prototype:m.prototype});import{goToLoginPage as S}from"https://assets.acdn.no/pkg/@amedia/user/v0/user.js";function I(l,t,e,i){let s=document.createElement("button");s.textContent=l||"Min side";let n=document.createElement("amedia-user-arrow");t&&n.classList.add(t);let r=!1;return s.addEventListener("click",()=>{n.toggle(),r=!r,window.dispatchEvent(new CustomEvent("aid-menu-open",{detail:r}))}),s.appendChild(n),i?n.insertAdjacentHTML("beforebegin",'<span class="employee">(mock user)</span>'):e&&n.insertAdjacentHTML("beforebegin",'<span class="employee">(ansatt i Amedia)</span>'),s}a(I,"renderAuthenticated");function _(l,t,e,i,s){let n=document.createDocumentFragment(),{userAgent:r}=window.navigator;if(e&&!r.includes("pushvarslings-app")){let d=document.createElement("a");d.textContent=i||"Bli abonnent!",d.setAttribute("href",[t,t.indexOf("?")===-1?"?":"&","ns_campaign=fbm.INTRO","&ns_mchannel=fbm.bliaboknapp","&ns_source=fbm.A","&ns_linkname=fbm.INTRO","&ns_fee=0"].join("")),n.appendChild(d)}s&&JSON.parse(decodeURIComponent(s)).forEach(d=>{if(d.authenticated)return;let c=document.createElement("a");c.setAttribute("href",d.url),c.textContent=d.text,n.appendChild(c)});let o=document.createElement("a");return o.textContent="Logg inn",o.href="",o.addEventListener("click",d=>{d.preventDefault(),S({context:"ego_top"})}),n.appendChild(o),n}a(_,"renderUnAuthenticated");var v=class v extends HTMLElement{render(){let t=this.getAttribute("orderpage"),e=this.getAttribute("subscription-link"),i=this.getAttribute("subscription-text"),s=this.getAttribute("links"),n=this.getAttribute("userName"),r=this.getAttribute("theme"),o=this.getAttribute("publication"),d=this.getAttribute("isMockUser")==="true",c=this.getAttribute("isEmployee")==="true",M=this.hasAttribute("authenticated")?I(n,r,c,d):_(o,t,e,i,s);this.appendChild(M),this.rendered=!0}connectedCallback(){this.rendered||this.render()}};a(v,"AidUsername");var w=v;customElements&&customElements.define&&customElements.define("amedia-username",w);import{aidUrls as x,logout as H}from"https://assets.acdn.no/pkg/@amedia/user/v0/user.js";var u;"ontransitionend"in window?u="transitionend":"onwebkittransitionend"in window?u="webkitTransitionEnd":u=!1;var E=class E extends HTMLElement{init(){this.domain=this.getAttribute("publication"),this.locale=this.getAttribute("locale"),this.mypage=this.getAttribute("mypage");let t=this.getAttribute("links"),e=this.getAttribute("isLoggedIn")==="true";this.links=t?JSON.parse(decodeURIComponent(t)):[],this.render(e),window.addEventListener("aid-menu-open",i=>{this.toggleMenuOpen(i)})}toggleMenuOpen(t){if(t.detail){this.setAttribute("style","display:block");let e=this.scrollHeight;if(u){let i=a(()=>{this.style.height="".concat(e,"px"),this.removeEventListener(u,i)},"end");this.style.height="".concat(e+30,"px"),this.addEventListener(u,i)}else this.style.height="".concat(e,"px")}else this.style.height="0px",this.addEventListener(u,()=>{this.setAttribute("style","display:none")},{once:!0})}render(t){this.setAttribute("style","display:none");let e=this.links.filter(n=>n.authenticated);this.mypage&&e.push({url:this.mypage,text:"Mine abonnement"}),e.push({url:x.profile.href,text:"Min aID"}),e.push({url:x.privacyStatement.href,text:"Personvern"});let i=e.map(n=>'<li><a href="'.concat(n.url,'">').concat(n.text,"</a></li>")).join(""),s=document.createElement("ul");if(s.insertAdjacentHTML("beforeend",i),t){let n=document.createElement("a");n.setAttribute("href","".concat(window.location.href,"/logg_ut")),n.textContent="Logg ut",n.classList.add("element","lp_logout_globy"),n.addEventListener("click",o=>{o.preventDefault(),H().then(()=>{window.location.hash="",window.location.reload()})});let r=document.createElement("li");r.appendChild(n),s.appendChild(r)}this.appendChild(s)}connectedCallback(){this._created||this.init(),this._created=!0}};a(E,"AidMenu");var y=E;customElements&&customElements.define&&customElements.define("amedia-aidmenu",y);import{UserDataRequest as N,getLoginUrl as O}from"https://assets.acdn.no/pkg/@amedia/user/v0/user.js";var h={nb_NO:{authenticated:{title:"%navn%, her er en personvernp\xE5minnelse",message:"%site% er en del av Amedia, og vi er ansvarlig for dine data. Vi bruker cookies og dine data til \xE5 forbedre og tilpasse tjenestene, tilbudene og annonsene du ser og bruker. Du kan n\xE5r som helst endre dine innstillinger i Min aID.",moreBtn:"Les mer",okBtn:"OK \u2013 jeg forst\xE5r"},unauthenticated:{title:"Personvern og cookies",message:"%site% er en del av Amedia, og vi er ansvarlig for dine data. Vi bruker cookies og dine data til \xE5 forbedre og tilpasse tjenestene, tilbudene og annonsene du ser og bruker.",moreBtn:"Les mer",okBtn:"OK \u2013 jeg forst\xE5r",loginCallToAction:"Vil du lagre dine personverninnstillinger?",login:"Logg inn med aID"}},nn_NO:{authenticated:{title:"%navn%, her er ei personvernp\xE5minning",message:"%site% er ein del av Amedia, og vi er ansvarlege for dine data. Vi brukar cookies og dine data til \xE5 forbetre og tilpasse tenestene, tilboda og annonsane du ser og brukar. Du kan n\xE5r som helst endre dine innstillingar i Min aID.",moreBtn:"Les meir",okBtn:"OK \u2013 Eg forst\xE5r"},unauthenticated:{title:"Personvern og cookies",message:"%site% er ein del av Amedia, og vi er ansvarlege for dine data. Vi brukar cookies og dine data til \xE5 forbetre og tilpasse tenestene, tilboda og annonsane du ser og brukar.",moreBtn:"Les meir",okBtn:"OK \u2013 Eg forst\xE5r",loginCallToAction:"Vil du lagre dine personverninnstillingar?",login:"Logg inn med aID"}}},k=class k extends HTMLElement{init(){this.disable=window.location.href.indexOf("disable_privacy_box=true")>-1;let{userAgent:t}=window.navigator;if(this.getAttribute("in-review")!==null&&t.includes("pushvarslings-app/".concat(this.getAttribute("app-version")))){this.parentNode.removeChild(this);return}this.initialized||(this.initialized=!0,this.publication=this.getAttribute("publication"),document.body.appendChild(this),new N().withAttributes(["name"]).withStorage(["euucp"]).fetch().then(({attributes:e,state:i,storage:s})=>{i.isLoggedIn?this.initializeAuthenticated(e,s.euucp):this.initializeUnauthenticated()}).catch(e=>{console.error(e)}))}initializeAuthenticated(t,e){if(typeof e>"u"||e.viewed&&("".concat(Date.now())-e.viewed)/1e3>60||e.button_clicked){this.parentNode.removeChild(this);return}this.username=t.name?t.name.split(" ")[0]:"Hei",e.viewed="".concat(Date.now()),e.save(),window.addEventListener("privacy-box-button-clicked",()=>{e.button_clicked="".concat(Date.now()),e.save(),this.parentNode.removeChild(this)}),this.renderBox("authenticated")}initializeUnauthenticated(){if(!window.localStorage||!window.sessionStorage){this.parentNode.removeChild(this);return}window.localStorage.euucp=window.localStorage.euucp||0;let t=parseInt(window.localStorage.euucp,10);if(t>=2){this.parentNode.removeChild(this);return}window.sessionStorage.euucp||(window.localStorage.euucp=t+1,window.sessionStorage.euucp="true"),window.addEventListener("privacy-box-button-clicked",()=>{this.parentNode.removeChild(this),window.localStorage.euucp=3}),this.renderBox("unauthenticated")}renderBox(t){this.disable&&this.setAttribute("style","display:none");let e=this.getAttribute("language"),i=this.getAttribute("site")||"Denne nettsiden",s=h[e][t].title.replace("%navn%",this.username),n=h[e][t].message.replace("%site%",i),{okBtn:r}=h[e][t],o=h[e][t].moreBtn,d=h[e][t].login?'\n            <p class="login">\n                '.concat(h[e][t].loginCallToAction,'\n                <a href="').concat(O({context:"euucp"}),'">\n                    ').concat(h[e][t].login,"\n                </a>\n            </p>"):"",c="\n        <div>\n            <h2>".concat(s,"</h2>\n            <p>").concat(n,"</p>\n            ").concat(d,'\n            <div class="actionBar">\n                <a class="lp_privacy_more" href="//www.amedia.no/personvern/">').concat(o,'</a>\n                <amedia-privacybox-button class="lp_privacy_ok">').concat(r,"</amedia-privacybox-button>\n            </div>\n            \n        </div>");this.insertAdjacentHTML("afterbegin",c),this.classList.add("active")}connectedCallback(){this.init()}attachedCallback(){this.init()}};a(k,"AmediaPrivacy");var p=k;customElements&&customElements.define?customElements.define("amedia-privacybox",p):document.registerElement("amedia-privacybox",{prototype:p.prototype});function B(l,t){let e=l.offsetWidth,i=l.getBoundingClientRect(),s=document.createElement("span");s.classList.add("amedia-button-ripple");let n=t.clientX-i.left,r=t.clientY-i.top,o=Math.max(e-n,n)*2;s.style.top="".concat(r-o/2,"px"),s.style.left="".concat(n-o/2,"px"),s.style.width="".concat(o,"px"),s.style.height="".concat(o,"px"),l.appendChild(s),setTimeout(()=>l.removeChild(s),1e3)}a(B,"addRipple");var C=!1;function j(){C!==!0&&(C=!0,document.head.insertAdjacentHTML("beforeend","\n  <style>\n      .amedia-button-ripple {\n          background: #fff;\n          border-radius: 100%;\n          position: absolute;\n          z-index: 1;\n          transform: scale(0);\n          animation: amedia-ripple 1000ms;\n          opacity: .75;\n      }\n\n      @keyframes amedia-ripple {\n          to {\n              opacity: 0;\n              transform: scale(1);\n          }\n      })\n      </style>"))}a(j,"addStyles");var L=class L extends HTMLElement{init(){if(this.connected)return;this.connected=!0,j(),this.addEventListener("mousedown",e=>B(this,e));let t=this.textContent;this.innerHTML="<button>".concat(t,"</button>"),this.addEventListener("mousedown",()=>{window.dispatchEvent(new CustomEvent("privacy-box-button-clicked"))})}connectedCallback(){this.init()}};a(L,"PrivacyButton");var g=L;customElements&&customElements.define?customElements.define("amedia-privacybox-button",g):document.registerElement("amedia-privacybox-button",{prototype:g.prototype});function $(l){return new DOMParser().parseFromString(l,"text/html").body.firstChild}a($,"stringToHTML");var A=class A extends HTMLElement{init(){this.disable=window.location.href.indexOf("disable_aid_menu=true")>-1,this.initialized=!0,this.publication=this.getAttribute("publication"),this.locale=this.getAttribute("locale")||"",this.mypage=this.getAttribute("mypage")||"",this.links=this.getAttribute("links"),this.orderpage=this.getAttribute("orderpage")||"",this.subscriptionLink=this.getAttribute("subscription-link")||"",this.subscriptionText=this.getAttribute("subscription-text")||"",this.theme=this.getAttribute("theme"),this.mockUser=this.getAttribute("mockuser"),window.location.hostname.includes("pluss.nettavisen.no")&&(this.publication="pluss.nettavisen.no"),window.location.hostname.includes("www.nettavisen.no")&&(this.publication="www.nettavisen.no"),this.mockUser?this.render():new U().withAttributes(["name","extraData"]).subscribe(({attributes:t,state:e})=>{var i;if(e.isLoggedIn!==!0&&e.isLoggedIn!==!1){e.emergencyMode&&e.emergencyMode.includes("aid")&&this.renderEmergencyMode();return}this.isLoggedIn=e.isLoggedIn,this.user={name:t.name||"Innlogget",isEmployee:!!((i=t==null?void 0:t.extraData)!=null&&i.amedia_staff_user)},this.render()})}connectedCallback(){this.initialized||this.init()}render(){var s;if((s=this.querySelector(".emergency-mode"))==null||s.delete(),this.disable)return this.setAttribute("style","display:none"),null;let t;this.isLoggedIn?t='authenticated username="'.concat(this.user.name,'" isEmployee="').concat(this.user.isEmployee,'"'):this.mockUser?t='authenticated username="'.concat(this.mockUser,'" isMockUser="true"'):t='orderpage="'.concat(this.orderpage,'" publication="').concat(this.publication,'" subscription-text="').concat(this.subscriptionText,'" subscription-link="').concat(this.subscriptionLink,'" links="').concat(this.links,'"');let e="<amedia-username ".concat(t,' theme="').concat(this.theme,'"></amedia-username>'),i='<amedia-aidmenu\n                class="'.concat(this.theme,'"\n                locale="').concat(this.locale,'"\n                publication="').concat(this.publication,'"\n                mypage="').concat(this.mypage,'"\n                links="').concat(this.links,'"\n                isLoggedIn="').concat(this.isLoggedIn,'"\n            </amedia-aidmenu>');return this.classList.contains("loaded")?(this.querySelector("amedia-username").replaceWith($(e)),this.querySelector("amedia-aidMenu").replaceWith($(i))):(this.insertAdjacentHTML("afterbegin","".concat(e).concat(i)),this.classList.add("loaded")),this}renderEmergencyMode(){this.querySelector(".emergency-mode")||this.insertAdjacentHTML("afterbegin",'<span class="emergency-mode">Tekniske problemer</span>')}};a(A,"AmediaUser");var b=A;customElements&&customElements.define?customElements.define("amedia-user",b):document.registerElement("amedia-user",{prototype:b.prototype});
//# sourceMappingURL=top.js.map
